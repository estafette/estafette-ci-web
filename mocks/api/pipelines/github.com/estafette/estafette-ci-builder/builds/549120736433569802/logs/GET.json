[{"step":"builder-info","image":null,"duration":0,"logLines":[{"line":1,"timestamp":"2020-04-23T13:32:32.751566229Z","streamType":"stdout","text":"Starting \u001b[1mestafette-ci-builder\u001b[0m version \u001b[1m0.0.650\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-04-14T14:25:44Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0m486e1decb1545b25a170bc9636fd7e5975b401e2"}],"exitCode":0,"status":"SUCCEEDED","autoInjected":true},{"step":"initialize","image":null,"duration":31739988424,"logLines":[{"line":10000,"timestamp":"2020-04-23T13:33:04.4917013Z","streamType":"stderr","text":"Failed with exit code: 1"}],"exitCode":0,"status":"FAILED","autoInjected":true,"nestedSteps":[{"step":"set-pending-build-status","depth":1,"image":{"name":"extensions/github-status","tag":"stable","isPulled":false,"imageSize":12649209,"pullDuration":2752511625,"isTrusted":true},"duration":28985522091,"logLines":[{"line":1,"timestamp":"2020-04-23T13:32:36.462480925Z","streamType":"stdout","text":"Starting \u001b[1mestafette-extension-github-status\u001b[0m version \u001b[1m0.1.46\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-03-04T09:32:11Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0m6db9d43ca763f9104293785ed2c594320dd7946a\n"},{"line":2,"timestamp":"2020-04-23T13:32:36.462485816Z","streamType":"stdout","text":"Setting logs url https://estafette.travix.com/pipelines/github.com/estafette/estafette-ci-builder/builds/549120736433569802/logs\n"},{"line":3,"timestamp":"2020-04-23T13:33:04.214255652Z","streamType":"stdout","text":"Deserializing response for 'https://api.github.com/repos/estafette/estafette-ci-builder/statuses/544d35805d83f850dc332670b384644f31d82c4c' Github api call failed \u001b[31merror=\u001b[0m\u001b[31m\"unexpected end of JSON input\"\u001b[0m \u001b[36mbody=\u001b[0m\n"},{"line":4,"timestamp":"2020-04-23T13:33:04.214271057Z","streamType":"stdout","text":"Updating Github build status failed \u001b[31merror=\u001b[0m\u001b[31m\"unexpected end of JSON input\"\u001b[0m\n"},{"line":10000,"timestamp":"2020-04-23T13:33:04.491643757Z","streamType":"stderr","text":"Failed with exit code: 1"}],"exitCode":0,"status":"FAILED","autoInjected":true},{"step":"envvars","depth":1,"image":{"name":"extensions/envvars","tag":"stable","isPulled":false,"imageSize":11158339,"pullDuration":2746485104},"duration":1175797936,"logLines":[{"line":1,"timestamp":"2020-04-23T13:32:36.429722101Z","streamType":"stdout","text":"Starting \u001b[1mestafette-extension-envvars\u001b[0m version \u001b[1m0.1.15\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-03-04T09:29:44Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0ma1eec2828262801647117796b44ee95ed842ef2f\n"},{"line":2,"timestamp":"2020-04-23T13:32:36.429736282Z","streamType":"stdout","text":"All available estafette environment variables; the _DNS_SAFE suffixed ones can be used to set dns labels. Since leading digits are not allowed some of them are empty.\n"},{"line":3,"timestamp":"2020-04-23T13:32:36.429739181Z","streamType":"stdout","text":"ESTAFETTE_BUILD_DATETIME: 2020-04-23T13:32:32Z\n"},{"line":4,"timestamp":"2020-04-23T13:32:36.429740788Z","streamType":"stdout","text":"ESTAFETTE_BUILD_DATETIME_DNS_SAFE: t13-32-32z\n"},{"line":5,"timestamp":"2020-04-23T13:32:36.429742544Z","streamType":"stdout","text":"ESTAFETTE_BUILD_ID: 549120736433569802\n"},{"line":6,"timestamp":"2020-04-23T13:32:36.431981699Z","streamType":"stdout","text":"ESTAFETTE_BUILD_ID_DNS_SAFE: \n"},{"line":7,"timestamp":"2020-04-23T13:32:36.431989933Z","streamType":"stdout","text":"ESTAFETTE_BUILD_STATUS: succeeded\n"},{"line":8,"timestamp":"2020-04-23T13:32:36.431991345Z","streamType":"stdout","text":"ESTAFETTE_BUILD_STATUS_DNS_SAFE: succeeded\n"},{"line":9,"timestamp":"2020-04-23T13:32:36.431992481Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION: 0.0.651\n"},{"line":10,"timestamp":"2020-04-23T13:32:36.431993291Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_DNS_SAFE: \n"},{"line":11,"timestamp":"2020-04-23T13:32:36.431994042Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_LABEL: master\n"},{"line":12,"timestamp":"2020-04-23T13:32:36.432012412Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_LABEL_DNS_SAFE: master\n"},{"line":13,"timestamp":"2020-04-23T13:32:36.432013252Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_MAJOR: 0\n"},{"line":14,"timestamp":"2020-04-23T13:32:36.432013928Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_MAJOR_DNS_SAFE: \n"},{"line":15,"timestamp":"2020-04-23T13:32:36.432014956Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_MINOR: 0\n"},{"line":16,"timestamp":"2020-04-23T13:32:36.432015716Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_MINOR_DNS_SAFE: \n"},{"line":17,"timestamp":"2020-04-23T13:32:36.432016518Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_PATCH: 651\n"},{"line":18,"timestamp":"2020-04-23T13:32:36.432017192Z","streamType":"stdout","text":"ESTAFETTE_BUILD_VERSION_PATCH_DNS_SAFE: \n"},{"line":19,"timestamp":"2020-04-23T13:32:36.432019093Z","streamType":"stdout","text":"ESTAFETTE_CI_SERVER_BASE_URL: https://estafette.travix.com/\n"},{"line":20,"timestamp":"2020-04-23T13:32:36.432021665Z","streamType":"stdout","text":"ESTAFETTE_CI_SERVER_BASE_URL_DNS_SAFE: https-estafette-travix-com\n"},{"line":21,"timestamp":"2020-04-23T13:32:36.432025288Z","streamType":"stdout","text":"ESTAFETTE_EXTENSION_CUSTOM_PROPERTIES: null\n"},{"line":22,"timestamp":"2020-04-23T13:32:36.432077114Z","streamType":"stdout","text":"ESTAFETTE_EXTENSION_CUSTOM_PROPERTIES_YAML: {}\n"},{"line":23,"timestamp":"2020-04-23T13:32:36.432078614Z","streamType":"stdout","text":"\n"},{"line":24,"timestamp":"2020-04-23T13:32:36.432079791Z","streamType":"stdout","text":"ESTAFETTE_GIT_BRANCH: master\n"},{"line":25,"timestamp":"2020-04-23T13:32:36.432083567Z","streamType":"stdout","text":"ESTAFETTE_GIT_BRANCH_DNS_SAFE: master\n"},{"line":26,"timestamp":"2020-04-23T13:32:36.432084969Z","streamType":"stdout","text":"ESTAFETTE_GIT_FULLNAME: estafette/estafette-ci-builder\n"},{"line":27,"timestamp":"2020-04-23T13:32:36.432087985Z","streamType":"stdout","text":"ESTAFETTE_GIT_FULLNAME_DNS_SAFE: estafette-estafette-ci-builder\n"},{"line":28,"timestamp":"2020-04-23T13:32:36.432091059Z","streamType":"stdout","text":"ESTAFETTE_GIT_NAME: estafette-ci-builder\n"},{"line":29,"timestamp":"2020-04-23T13:32:36.432093822Z","streamType":"stdout","text":"ESTAFETTE_GIT_NAME_DNS_SAFE: estafette-ci-builder\n"},{"line":30,"timestamp":"2020-04-23T13:32:36.432102093Z","streamType":"stdout","text":"ESTAFETTE_GIT_OWNER: estafette\n"},{"line":31,"timestamp":"2020-04-23T13:32:36.43210495Z","streamType":"stdout","text":"ESTAFETTE_GIT_OWNER_DNS_SAFE: estafette\n"},{"line":32,"timestamp":"2020-04-23T13:32:36.43210821Z","streamType":"stdout","text":"ESTAFETTE_GIT_REVISION: 544d35805d83f850dc332670b384644f31d82c4c\n"},{"line":33,"timestamp":"2020-04-23T13:32:36.432116543Z","streamType":"stdout","text":"ESTAFETTE_GIT_REVISION_DNS_SAFE: d35805d83f850dc332670b384644f31d82c4c\n"},{"line":34,"timestamp":"2020-04-23T13:32:36.432117868Z","streamType":"stdout","text":"ESTAFETTE_GIT_SOURCE: github.com\n"},{"line":35,"timestamp":"2020-04-23T13:32:36.432180499Z","streamType":"stdout","text":"ESTAFETTE_GIT_SOURCE_DNS_SAFE: github-com\n"},{"line":36,"timestamp":"2020-04-23T13:32:36.432181612Z","streamType":"stdout","text":"ESTAFETTE_LABEL_APP_GROUP: estafette-ci\n"},{"line":37,"timestamp":"2020-04-23T13:32:36.432182325Z","streamType":"stdout","text":"ESTAFETTE_LABEL_APP_GROUP_DNS_SAFE: estafette-ci\n"},{"line":38,"timestamp":"2020-04-23T13:32:36.432183128Z","streamType":"stdout","text":"ESTAFETTE_LABEL_LANGUAGE: golang\n"},{"line":39,"timestamp":"2020-04-23T13:32:36.432184521Z","streamType":"stdout","text":"ESTAFETTE_LABEL_LANGUAGE_DNS_SAFE: golang\n"},{"line":40,"timestamp":"2020-04-23T13:32:36.432185313Z","streamType":"stdout","text":"ESTAFETTE_LABEL_TEAM: estafette-team\n"},{"line":41,"timestamp":"2020-04-23T13:32:36.432186137Z","streamType":"stdout","text":"ESTAFETTE_LABEL_TEAM_DNS_SAFE: estafette-team\n"},{"line":42,"timestamp":"2020-04-23T13:32:36.432187115Z","streamType":"stdout","text":"ESTAFETTE_LOG_FORMAT: console\n"},{"line":43,"timestamp":"2020-04-23T13:32:36.432772605Z","streamType":"stdout","text":"ESTAFETTE_STAGES: [{\"Name\":\"initialize\",\"ContainerImage\":\"\",\"Shell\":\"\",\"WorkingDirectory\":\"\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":true,\"Retries\":0,\"ParallelStages\":[{\"Name\":\"git-clone\",\"ContainerImage\":\"extensions/git-clone:stable\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":true,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":null},{\"Name\":\"set-pending-build-status\",\"ContainerImage\":\"extensions/github-status:stable\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":true,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"status\":\"pending\"}},{\"Name\":\"envvars\",\"ContainerImage\":\"extensions/envvars:stable\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":true,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":null}],\"Services\":null,\"CustomProperties\":null},{\"Name\":\"build\",\"ContainerImage\":\"golang:1.14.0-alpine3.11\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":[\"go test ./...\",\"go build -v -ldflags \\\"-X main.appgroup=estafette-ci -X main.app=estafette-ci-builder -X main.version=0.0.651 -X main.revision=544d35805d83f850dc332670b384644f31d82c4c -X main.branch=master -X main.buildDate=2020-04-23T13:32:32Z\\\" -o ./publish/estafette-ci-builder\"],\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":{\"CGO_ENABLED\":\"0\",\"GOARCH\":\"amd64\",\"GOOS\":\"linux\"},\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"bake-all\",\"ContainerImage\":\"\",\"Shell\":\"\",\"WorkingDirectory\":\"\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":[{\"Name\":\"bake\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"build\",\"copy\":[\"builder/templates\"],\"dontExpand\":[\"ESTAFETTE_WORKDIR\"],\"no-cache\":true,\"path\":\"./publish\",\"repositories\":[\"estafette\"]}},{\"Name\":\"bake-gocd-agent\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"build\",\"copy\":[\"builder/templates\"],\"dockerfile\":\"Dockerfile.gocd\",\"no-cache\":true,\"path\":\"./publish\",\"repositories\":[\"estafette\"],\"versionTagSuffix\":\"gocd\"}}],\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"dive-and-trivy-all\",\"ContainerImage\":\"\",\"Shell\":\"\",\"WorkingDirectory\":\"\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":[{\"Name\":\"dive\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"dive\",\"repositories\":[\"estafette\"]}},{\"Name\":\"dive-gocd-agent\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"dive\",\"repositories\":[\"estafette\"],\"versionTagSuffix\":\"gocd\"}},{\"Name\":\"trivy\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"trivy\",\"repositories\":[\"estafette\"]}},{\"Name\":\"trivy-gocd-agent\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"trivy\",\"repositories\":[\"estafette\"],\"versionTagSuffix\":\"gocd\"}}],\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"clean-working-directory\",\"ContainerImage\":\"golang:1.14.0-alpine3.11\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":[\"rm -rf ..?* .[!.]* *\"],\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"test\",\"ContainerImage\":\"estafette/estafette-ci-builder:0.0.651\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":{\"BUILDER_CONFIG\":\"{ \\\"action\\\":\\\"build\\\", \\\"track\\\":\\\"dev\\\", \\\"dindMtu\\\":\\\"1460\\\", \\\"dindBip\\\":\\\"192.168.3.1/24\\\", \\\"dindNetwork\\\":{ \\\"name\\\":\\\"estafette-integration\\\", \\\"subnet\\\":\\\"192.168.4.1/24\\\", \\\"gateway\\\":\\\"192.168.4.1\\\" }, \\\"manifest\\\":{ \\\"Builder\\\":{ \\\"Track\\\":\\\"stable\\\", \\\"OperatingSystem\\\":\\\"linux\\\" }, \\\"Labels\\\":{ \\\"app\\\":\\\"estafette-ci-builder\\\", \\\"app-group\\\":\\\"estafette-ci\\\", \\\"language\\\":\\\"golang\\\", \\\"team\\\":\\\"estafette-team\\\" }, \\\"Version\\\":{ \\\"SemVer\\\":{ \\\"Major\\\":0, \\\"Minor\\\":0, \\\"Patch\\\":\\\"{{auto}}\\\", \\\"LabelTemplate\\\":\\\"{{branch}}\\\", \\\"ReleaseBranch\\\":\\\"master\\\" }, \\\"Custom\\\":null }, \\\"GlobalEnvVars\\\":null, \\\"Stages\\\":[ { \\\"Name\\\":\\\"services-test\\\", \\\"ContainerImage\\\":\\\"alpine:latest\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\": [ \\\"route\\\", \\\"ip addr show eth0\\\", \\\"cat /etc/hosts\\\", \\\"cat /etc/resolv.conf\\\", \\\"apk add curl\\\", \\\"curl -v --connect-timeout 2 --retry 10 --retry-delay 2 --retry-connrefused http://nginx:80/\\\" ], \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"EnvVars\\\":null, \\\"AutoInjected\\\":false, \\\"Retries\\\":0, \\\"Services\\\": [ { \\\"Name\\\": \\\"nginx\\\", \\\"ContainerImage\\\": \\\"nginx:alpine\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"Readiness\\\": { \\\"Path\\\": \\\"/\\\", \\\"TimeoutSeconds\\\": 30, \\\"Hostname\\\": \\\"nginx\\\", \\\"Port\\\": 80, \\\"Protocol\\\": \\\"http\\\" } }, { \\\"Name\\\": \\\"cockroachdb\\\", \\\"ContainerImage\\\": \\\"cockroachdb/cockroach:v19.2.0\\\", \\\"Commands\\\":[ \\\"/cockroach/cockroach start-single-node --insecure --advertise-addr cockroachdb\\\" ], \\\"EnvVars\\\":{ \\\"COCKROACH_SKIP_ENABLING_DIAGNOSTIC_REPORTING\\\":\\\"true\\\" }, \\\"Shell\\\":\\\"/bin/sh\\\", \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"Readiness\\\": { \\\"Path\\\": \\\"/health?ready=1\\\", \\\"TimeoutSeconds\\\": 30, \\\"Hostname\\\": \\\"cockroachdb\\\", \\\"Port\\\": 8080, \\\"Protocol\\\": \\\"http\\\" } } ] }, { \\\"Name\\\":\\\"git-clone\\\", \\\"ContainerImage\\\":\\\"extensions/git-clone:dev\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\":null, \\\"shallow\\\": false, \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"EnvVars\\\":null, \\\"AutoInjected\\\":true, \\\"Retries\\\":0, \\\"CustomProperties\\\":null }, { \\\"Name\\\":\\\"parallel-builds\\\", \\\"ContainerImage\\\":\\\"\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\":[], \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"EnvVars\\\":{}, \\\"AutoInjected\\\":false, \\\"Retries\\\":0, \\\"CustomProperties\\\":null, \\\"ParallelStages\\\":[ { \\\"Name\\\":\\\"buildA\\\", \\\"ContainerImage\\\": \\\"golang:1.14.0-alpine3.11\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\":[ \\\"go test ./...\\\", \\\"go build -v -ldflags \\\\\\\"-X main.version=0.0.651 -X main.revision=544d35805d83f850dc332670b384644f31d82c4c -X main.branch=master -X main.buildDate=2020-04-23T13:32:32Z\\\\\\\" -o ./publish/estafette-ci-builder\\\", \\\"echo ${PWD}\\\", \\\"ls -latr\\\", \\\"ls -latr ./publish\\\" ], \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"EnvVars\\\":{ \\\"CGO_ENABLED\\\":\\\"0\\\", \\\"GOOS\\\":\\\"linux\\\", \\\"GOARCH\\\":\\\"amd64\\\" }, \\\"AutoInjected\\\":false, \\\"Retries\\\":0, \\\"CustomProperties\\\":null }, { \\\"Name\\\":\\\"buildB\\\", \\\"ContainerImage\\\":\\\"alpine:3.10\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\":[ \\\"echo hi\\\" ], \\\"When\\\":\\\"status == 'succeeded'\\\" } ] }, { \\\"Name\\\":\\\"bake-estafette\\\", \\\"ContainerImage\\\":\\\"extensions/docker:dev\\\", \\\"Shell\\\":\\\"/bin/sh\\\", \\\"WorkingDirectory\\\":\\\"/estafette-work\\\", \\\"Commands\\\":null, \\\"When\\\":\\\"status == 'succeeded'\\\", \\\"EnvVars\\\":null, \\\"AutoInjected\\\":false, \\\"Retries\\\":0, \\\"CustomProperties\\\":{ \\\"action\\\":\\\"build\\\", \\\"no-cache\\\":true, \\\"tag\\\":\\\"testtag\\\", \\\"expand-variables\\\":false, \\\"path\\\":\\\"./publish\\\", \\\"repositories\\\":[\\\"estafette\\\"] } } ], \\\"Releases\\\":null }, \\\"jobName\\\":\\\"build-estafette-estafette-ci-builder-391855387650326531\\\", \\\"ciServer\\\":{ \\\"baseUrl\\\":\\\"https://httpstat.us/200\\\", \\\"builderEventsUrl\\\":\\\"https://httpstat.us/200\\\", \\\"postLogsUrl\\\":\\\"https://httpstat.us/200\\\", \\\"apiKey\\\":\\\"\\\" }, \\\"buildParams\\\":{ \\\"buildID\\\":391855387650326531 }, \\\"git\\\":{ \\\"repoSource\\\":\\\"github.com\\\", \\\"repoOwner\\\":\\\"estafette\\\", \\\"repoName\\\":\\\"estafette-ci-builder\\\", \\\"repoBranch\\\":\\\"integration-test\\\", \\\"repoRevision\\\":\\\"4ba7791566e3f6f69e8542183168ec9b1ad03ca7\\\" }, \\\"buildVersion\\\":{ \\\"version\\\":\\\"0.0.0-integration-test\\\", \\\"major\\\":0, \\\"minor\\\":0, \\\"patch\\\":\\\"0\\\", \\\"autoincrement\\\":0 }, \\\"credentials\\\":null, \\\"trustedImages\\\":[ { \\\"path\\\":\\\"extensions/docker\\\", \\\"runDocker\\\":true }, { \\\"path\\\":\\\"estafette/estafette-ci-builder\\\", \\\"runPrivileged\\\":true }, { \\\"path\\\":\\\"golang\\\", \\\"runDocker\\\":true, \\\"allowCommands\\\":true }, { \\\"path\\\":\\\"extensions/git-clone\\\" }, { \\\"path\\\":\\\"bsycorp/kind\\\", \\\"runPrivileged\\\":true } ] }\",\"ESTAFETTE_LOG_FORMAT\":\"console\",\"SECRET_DECRYPTION_KEY\":\"8c6E5e7R8ameE2L6qxEcN5Yc3Q7P4Yd4\"},\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"push-all\",\"ContainerImage\":\"\",\"Shell\":\"\",\"WorkingDirectory\":\"\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":[{\"Name\":\"push-to-docker-hub\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"push\",\"repositories\":[\"estafette\"]}},{\"Name\":\"push-gocd-agent-to-docker-hub\",\"ContainerImage\":\"extensions/docker:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"action\":\"push\",\"repositories\":[\"estafette\"],\"versionTagSuffix\":\"gocd\"}}],\"Services\":null,\"CustomProperties\":{}},{\"Name\":\"slack-notify\",\"ContainerImage\":\"extensions/slack-build-status:dev\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded' || status == 'failed'\",\"EnvVars\":null,\"AutoInjected\":false,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":{\"channels\":[\"#build-status\"],\"workspace\":\"estafette\"}},{\"Name\":\"set-build-status\",\"ContainerImage\":\"extensions/github-status:stable\",\"Shell\":\"/bin/sh\",\"WorkingDirectory\":\"/estafette-work\",\"Commands\":null,\"RunCommandsInForeground\":false,\"When\":\"status == 'succeeded' || status == 'failed'\",\"EnvVars\":null,\"AutoInjected\":true,\"Retries\":0,\"ParallelStages\":null,\"Services\":null,\"CustomProperties\":null}]\n"},{"line":44,"timestamp":"2020-04-23T13:32:36.432774757Z","streamType":"stdout","text":"ESTAFETTE_STAGES_DNS_SAFE: name-initialize-containerimage-shell-workingdirectory-commands\n"},{"line":45,"timestamp":"2020-04-23T13:32:36.432775856Z","streamType":"stdout","text":"ESTAFETTE_STAGE_NAME: envvars\n"},{"line":46,"timestamp":"2020-04-23T13:32:36.432778196Z","streamType":"stdout","text":"ESTAFETTE_TRIGGER_MANUAL_USER_ID: ***@travix.com\n"},{"line":47,"timestamp":"2020-04-23T13:32:36.432779183Z","streamType":"stdout","text":"ESTAFETTE_TRIGGER_MANUAL_USER_ID_DNS_SAFE: ***-travix-com\n"}],"exitCode":0,"status":"SUCCEEDED","autoInjected":true},{"step":"git-clone","depth":1,"image":{"name":"extensions/git-clone","tag":"stable","isPulled":false,"imageSize":33645729,"pullDuration":2282762126,"isTrusted":true},"duration":3758242281,"logLines":[{"line":1,"timestamp":"2020-04-23T13:32:36.250764284Z","streamType":"stdout","text":"Starting \u001b[1mestafette-extension-git-clone\u001b[0m version \u001b[1m0.1.81\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-04-01T15:00:17Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0m50245b030d6c4f5911a8332aeef550ca39da8115\n"},{"line":2,"timestamp":"2020-04-23T13:32:36.250773041Z","streamType":"stdout","text":"Unmarshalling injected github api token credentials\n"},{"line":3,"timestamp":"2020-04-23T13:32:36.251469482Z","streamType":"stdout","text":"Cloning git repository estafette-ci-builder to branch master and revision 544d35805d83f850dc332670b384644f31d82c4c with shallow clone is true and depth 50...\n"},{"line":4,"timestamp":"2020-04-23T13:32:36.25147948Z","streamType":"stdout","text":"\u001b[38;5;250m\u003e git clone --depth=50 --branch=master https://x-access-token:***@github.com/estafette/estafette-ci-builder /estafette-work\u001b[0m\n"},{"line":5,"timestamp":"2020-04-23T13:32:36.253326502Z","streamType":"stderr","text":"Cloning into '/estafette-work'...\n"},{"line":6,"timestamp":"2020-04-23T13:32:38.547116955Z","streamType":"stdout","text":"\u001b[38;5;250m\u003e git checkout --quiet --force 544d35805d83f850dc332670b384644f31d82c4c\u001b[0m\n"},{"line":7,"timestamp":"2020-04-23T13:32:38.552803619Z","streamType":"stdout","text":"Finished cloning git repository estafette-ci-builder to branch master and revision 544d35805d83f850dc332670b384644f31d82c4c with shallow clone is true and depth 50\n"}],"exitCode":0,"status":"SUCCEEDED","autoInjected":true}]},{"step":"build","image":{"name":"golang","tag":"1.14.0-alpine3.11","isPulled":false,"imageSize":0,"pullDuration":0},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"bake-all","image":null,"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED","nestedSteps":[{"step":"bake","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"bake-gocd-agent","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"}]},{"step":"dive-and-trivy-all","image":null,"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED","nestedSteps":[{"step":"dive","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"dive-gocd-agent","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"trivy","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"trivy-gocd-agent","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"}]},{"step":"clean-working-directory","image":{"name":"golang","tag":"1.14.0-alpine3.11","isPulled":false,"imageSize":0,"pullDuration":0},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"test","image":{"name":"estafette/estafette-ci-builder","tag":"${ESTAFETTE_BUILD_VERSION}","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"push-all","image":null,"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED","nestedSteps":[{"step":"push-to-docker-hub","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"},{"step":"push-gocd-agent-to-docker-hub","depth":1,"image":{"name":"extensions/docker","tag":"dev","isPulled":false,"imageSize":0,"pullDuration":0,"isTrusted":true},"duration":0,"logLines":null,"exitCode":0,"status":"SKIPPED"}]},{"step":"slack-notify","image":{"name":"extensions/slack-build-status","tag":"dev","isPulled":false,"imageSize":12653738,"pullDuration":1811119593,"isTrusted":true},"duration":1139234420,"logLines":[{"line":1,"timestamp":"2020-04-23T13:33:06.990370481Z","streamType":"stdout","text":"Starting \u001b[1mestafette-extension-slack-build-status\u001b[0m version \u001b[1m0.1.66\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-03-04T09:34:02Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0me3cdae7bc38d796404b561d6f47e0d28009738c2\n"},{"line":2,"timestamp":"2020-04-23T13:33:06.990378292Z","streamType":"stdout","text":"Unmarshalling credentials...\n"},{"line":3,"timestamp":"2020-04-23T13:33:06.990380889Z","streamType":"stdout","text":"Checking if credential estafette exists...\n"},{"line":4,"timestamp":"2020-04-23T13:33:06.990396805Z","streamType":"stdout","text":"Checking credential slack-webhook-estafette for workspace estafette...\n"},{"line":5,"timestamp":"2020-04-23T13:33:06.990398758Z","streamType":"stdout","text":"Found credential slack-webhook-estafette for workspace estafette\n"},{"line":6,"timestamp":"2020-04-23T13:33:07.19553387Z","streamType":"stdout","text":"Finished estafette-extension-slack-build-status...\n"}],"exitCode":0,"status":"SUCCEEDED"},{"step":"set-build-status","image":null,"duration":8727964491,"logLines":[{"line":1,"timestamp":"2020-04-23T13:33:08.154244869Z","streamType":"stdout","text":"Starting \u001b[1mestafette-extension-github-status\u001b[0m version \u001b[1m0.1.46\u001b[0m... \u001b[36mbranch=\u001b[0mmaster \u001b[36mbuildDate=\u001b[0m2020-03-04T09:32:11Z \u001b[36mgoVersion=\u001b[0mgo1.14 \u001b[36mos=\u001b[0mlinux \u001b[36mrevision=\u001b[0m6db9d43ca763f9104293785ed2c594320dd7946a\n"},{"line":2,"timestamp":"2020-04-23T13:33:08.154248347Z","streamType":"stdout","text":"Setting logs url https://estafette.travix.com/pipelines/github.com/estafette/estafette-ci-builder/builds/549120736433569802/logs\n"},{"line":3,"timestamp":"2020-04-23T13:33:15.915409805Z","streamType":"stdout","text":"Received successful response for 'https://api.github.com/repos/estafette/estafette-ci-builder/statuses/544d35805d83f850dc332670b384644f31d82c4c' Github api call with status code 201\n"},{"line":4,"timestamp":"2020-04-23T13:33:15.915419018Z","streamType":"stdout","text":"Finished estafette-extension-github-status...\n"}],"exitCode":0,"status":"SUCCEEDED","autoInjected":true}]