(self.webpackChunkestafette_ci_web=self.webpackChunkestafette_ci_web||[]).push([[475],{5969:function(t,e,r){"use strict";r.d(e,{a:function(){return o}});var i=r(2989),s=r(9558),a=r(7023);var n={vertical:{type:Boolean,default:!1},size:{type:String,default:function(){return(0,a.wJ)("BButton","size")}},tag:{type:String,default:"div"},ariaRole:{type:String,default:"group"}},o=i.Z.extend({name:"BButtonGroup",functional:!0,props:n,render:function(t,e){var r,i,a,n=e.props,o=e.data,l=e.children;return t(n.tag,(0,s.b)(o,{class:(r={"btn-group":!n.vertical,"btn-group-vertical":n.vertical},i="btn-group-".concat(n.size),a=n.size,i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r),attrs:{role:n.ariaRole}}),l)}})},3630:function(t,e,r){"use strict";r.d(e,{X:function(){return u}});var i=r(2989),s=r(9558);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l={id:{type:String},tag:{type:String,default:"header"},variant:{type:String}},u=i.Z.extend({name:"BDropdownHeader",functional:!0,props:l,render:function(t,e){var r=e.props,i=e.data,a=e.children,l=i.attrs||{};return i.attrs={},t("li",(0,s.b)(i,{attrs:{role:"presentation"}}),[t(r.tag,{staticClass:"dropdown-header",class:o({},"text-".concat(r.variant),r.variant),attrs:n(n({},l),{},{id:r.id||null,role:"heading"}),ref:"header"},a)])}})},2332:function(t,e,r){"use strict";r.d(e,{t:function(){return c}});var i=r(2989),s=r(8492),a=r(8280);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={active:{type:Boolean,default:!1},activeClass:{type:String,default:"active"},buttonClass:{type:[String,Array,Object]},disabled:{type:Boolean,default:!1},variant:{type:String}},c=i.Z.extend({name:"BDropdownItemButton",mixins:[s.Z,a.Z],inheritAttrs:!1,inject:{bvDropdown:{default:null}},props:u,computed:{computedAttrs:function(){return o(o({},this.bvAttrs),{},{role:"menuitem",type:"button",disabled:this.disabled})}},methods:{closeDropdown:function(){this.bvDropdown&&this.bvDropdown.hide(!0)},onClick:function(t){this.$emit("click",t),this.closeDropdown()}},render:function(t){var e;return t("li",{attrs:{role:"presentation"}},[t("button",{staticClass:"dropdown-item",class:[this.buttonClass,(e={},l(e,this.activeClass,this.active),l(e,"text-".concat(this.variant),this.variant&&!(this.active||this.disabled)),e)],attrs:this.computedAttrs,on:{click:this.onClick},ref:"button"},this.normalizeSlot("default"))])}})},6918:function(t,e,r){"use strict";r.d(e,{a:function(){return y}});var i=r(2989),s=r(3058),a=r(7023),n=r(6410),o=r(8077),l=r(1572),u=r(3284),c=r(7040),h=r(1578),p=r(3954),f=r(488),d=r(6595),g=r(7568),m=r(9878),b="BPaginationNav",v={size:{type:String,default:function(){return(0,a.wJ)(b,"size")}},numberOfPages:{type:[Number,String],default:1,validator:function(t){return!((0,p.Z3)(t,0)<1)||((0,g.ZK)('Prop "number-of-pages" must be a number greater than "0"',b),!1)}},baseUrl:{type:String,default:"/"},useRouter:{type:Boolean,default:!1},linkGen:{type:Function},pageGen:{type:Function},pages:{type:Array},noPageDetect:{type:Boolean,default:!1},activeClass:{type:String},exact:{type:Boolean,default:!1},exactActiveClass:{type:String},noPrefetch:{type:Boolean,default:!1}},y=i.Z.extend({name:b,mixins:[m.Z],props:v,computed:{isNav:function(){return!0},computedValue:function(){var t=(0,p.Z3)(this.value,0);return t<1?null:t}},watch:{numberOfPages:function(){var t=this;this.$nextTick((function(){t.setNumberOfPages()}))},pages:function(){var t=this;this.$nextTick((function(){t.setNumberOfPages()}))}},created:function(){this.setNumberOfPages()},mounted:function(){var t=this;this.$router&&this.$watch("$route",(function(){t.$nextTick((function(){(0,n.bz)((function(){t.guessCurrentPage()}))}))}))},methods:{setNumberOfPages:function(){var t,e=this;(0,l.kJ)(this.pages)&&this.pages.length>0?this.localNumberOfPages=this.pages.length:this.localNumberOfPages=(t=this.numberOfPages,(0,h.nP)((0,p.Z3)(t,0),1)),this.$nextTick((function(){e.guessCurrentPage()}))},onClick:function(t,e){var r=this;t!==this.currentPage&&((0,n.bz)((function(){r.currentPage=t,r.$emit("change",t)})),this.$nextTick((function(){var t=e.currentTarget||e.target;(0,n.Cx)(t)})))},getPageInfo:function(t){if(!(0,l.kJ)(this.pages)||0===this.pages.length||(0,u.o8)(this.pages[t-1])){var e="".concat(this.baseUrl).concat(t);return{link:this.useRouter?{path:e}:e,text:(0,d.BB)(t)}}var r=this.pages[t-1];if((0,c.Kn)(r)){var i=r.link;return{link:(0,c.Kn)(i)?i:this.useRouter?{path:i}:i,text:(0,d.BB)(r.text||t)}}return{link:(0,d.BB)(r),text:(0,d.BB)(t)}},makePage:function(t){var e=this.getPageInfo(t);return this.pageGen&&(0,u.mf)(this.pageGen)?this.pageGen(t,e):e.text},makeLink:function(t){var e=this.getPageInfo(t);return this.linkGen&&(0,u.mf)(this.linkGen)?this.linkGen(t,e):e.link},linkProps:function(t){var e=this.makeLink(t),r={target:this.target||null,rel:this.rel||null,disabled:this.disabled,exact:this.exact,activeClass:this.activeClass,exactActiveClass:this.exactActiveClass,append:this.append,replace:this.replace,noPrefetch:this.noPrefetch};return this.useRouter||(0,c.Kn)(e)?r.to=e:r.href=e,r},resolveLink:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{(t=document.createElement("a")).href=(0,f.tN)({to:e},"a","/","/"),document.body.appendChild(t);var r=t,i=r.pathname,s=r.hash,a=r.search;return document.body.removeChild(t),{path:i,hash:s,query:(0,f.mB)(a)}}catch(e){try{t&&t.parentNode&&t.parentNode.removeChild(t)}catch(t){}return{}}},resolveRoute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var e=this.$router.resolve(t,this.$route).route;return{path:e.path,hash:e.hash,query:e.query}}catch(t){return{}}},guessCurrentPage:function(){var t=this.computedValue,e=this.$router,r=this.$route;if(!this.noPageDetect&&!t&&(o.jU||!o.jU&&e))for(var i=e&&r?{path:r.path,hash:r.hash,query:r.query}:{},a=o.jU?window.location||document.location:null,n=a?{path:a.pathname,hash:a.hash,query:(0,f.mB)(a.search)}:{},l=1;!t&&l<=this.localNumberOfPages;l++){var u=this.makeLink(l);t=e&&((0,c.Kn)(u)||this.useRouter)?(0,s.Z)(this.resolveRoute(u),i)?l:null:o.jU?(0,s.Z)(this.resolveLink(u),n)?l:null:-1}this.currentPage=t>0?t:0}}})},2981:function(t,e,r){"use strict";r.d(e,{Q:function(){return p}});var i=r(2989),s=r(7023),a=r(8735),n=r(3284),o=r(1578),l=r(3954),u=r(6595),c=r(8280),h="BProgressBar",p=i.Z.extend({name:h,mixins:[c.Z],inject:{bvProgress:{default:function(){return{}}}},props:{value:{type:[Number,String],default:0},label:{type:String},labelHtml:{type:String},max:{type:[Number,String],default:null},precision:{type:[Number,String],default:null},variant:{type:String,default:function(){return(0,s.wJ)(h,"variant")}},striped:{type:Boolean,default:null},animated:{type:Boolean,default:null},showProgress:{type:Boolean,default:null},showValue:{type:Boolean,default:null}},computed:{progressBarClasses:function(){return[this.computedVariant?"bg-".concat(this.computedVariant):"",this.computedStriped||this.computedAnimated?"progress-bar-striped":"",this.computedAnimated?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return(0,l.f_)(this.value,0)},computedMax:function(){var t=(0,l.f_)(this.max)||(0,l.f_)(this.bvProgress.max,0);return t>0?t:100},computedPrecision:function(){return(0,o.nP)((0,l.Z3)(this.precision,(0,l.Z3)(this.bvProgress.precision,0)),0)},computedProgress:function(){var t=this.computedPrecision,e=(0,o.Fq)(10,t);return(0,l.FH)(100*e*this.computedValue/this.computedMax/e,t)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return(0,n.jn)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return(0,n.jn)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return(0,n.jn)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return(0,n.jn)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(t){var e=t();return this.hasNormalizedSlot("default")?e=this.normalizeSlot("default"):this.label||this.labelHtml?e=t("span",{domProps:(0,a.U)(this.labelHtml,this.label)}):this.computedShowProgress?e=this.computedProgress:this.computedShowValue&&(e=(0,l.FH)(this.computedValue,this.computedPrecision)),t("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":(0,u.BB)(this.computedMax),"aria-valuenow":(0,l.FH)(this.computedValue,this.computedPrecision)}},[e])}})},5752:function(t,e,r){"use strict";r.d(e,{D:function(){return l}});var i=r(2989),s=r(7023),a=r(8280),n=r(2981),o="BProgress",l=i.Z.extend({name:o,mixins:[a.Z],provide:function(){return{bvProgress:this}},props:{variant:{type:String,default:function(){return(0,s.wJ)(o,"variant")}},striped:{type:Boolean,default:!1},animated:{type:Boolean,default:!1},height:{type:String},precision:{type:[Number,String],default:0},showProgress:{type:Boolean,default:!1},showValue:{type:Boolean,default:!1},max:{type:[Number,String],default:100},value:{type:[Number,String],default:0}},computed:{progressHeight:function(){return{height:this.height||null}}},render:function(t){var e=this.normalizeSlot("default");return e||(e=t(n.Q,{props:{value:this.value,max:this.max,precision:this.precision,variant:this.variant,animated:this.animated,striped:this.striped,showProgress:this.showProgress,showValue:this.showValue}})),t("div",{class:["progress"],style:this.progressHeight},[e])}})},9236:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-6 col-xxl-4"},[r("status-filter",{attrs:{filter:t.filter}})],1),t._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"}),t._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"}),t._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("frequent-labels",{attrs:{filter:t.filter}})],1),t._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[r("since-selector",{attrs:{model:t.filter.since,"on-change":t.setSince}})],1)]),t._v(" "),r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-9"},[r("label-filter",{attrs:{filter:t.filter}})],1),t._v(" "),r("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:t.pagination,"link-generator":t.paginationLinkGenerator}})],1)]),t._v(" "),r("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:t.fields}}),t._v(" "),t.builds.length>0?r("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},t._l(t.builds,(function(e){return r("build-row",{key:e.id,attrs:{build:e,builds:t.builds,"all-builds-mode":!0}})})),1):t.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[t._v("\n    There are no builds for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),t._v(" "),t.builds.length>0?r("pagination",{attrs:{pagination:t.pagination,"link-generator":t.paginationLinkGenerator}}):t._e()],1)};i._withStripped=!0;var s=r(629),a=r(7817),n=r(1826),o=r(3897),l=r(7651),u=r(6388),c=r(2352),h=r(3175),p=r(9090),f=r(9271);function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),i.forEach((function(e){g(t,e,r[e])}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={components:{Spinner:a.Z,StatusFilter:n.Z,SinceSelector:o.Z,LabelFilter:l.Z,FrequentLabels:u.Z,PaginationCompact:c.Z,BuildRow:h.Z,Pagination:p.Z,TransitionGroupHeader:f.Z},props:{query:{type:Object,default:null}},data:function(){return{builds:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",since:"1d",labels:""},sort:"-updated_at",fields:[{name:"Pipeline",class:"col-3",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Version",class:"col-2"},{name:"Status",class:"col-1"},{name:"Built",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-updated_at"}},{name:"Branch",class:"col-1"},{name:"Revision",class:"col-1"},{name:"Commit(s)",class:"col-2"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=d({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBuilds()},methods:{paginationLinkGenerator:function(t){var e=this.getQueryParams();return t>0?e.page=t:e.page&&delete e.page,{query:e}},getQueryParams:function(){var t=d({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?t.status=this.filter.status:t.status&&delete t.status,this.filter&&this.filter.since&&""!==this.filter.since?t.since=this.filter.since:t.since&&delete t.since,this.filter&&this.filter.labels&&""!==this.filter.labels?t.labels=this.filter.labels:t.labels&&delete t.labels,this.pagination&&this.pagination.page&&this.pagination.page>0?t.page=this.pagination.page:t.page&&delete t.page,this.sort?t.sort=this.sort:t.sort&&delete t.sort,t},setDataFromQueryParams:function(t){this.pagination.page=t&&t.page?Number.parseInt(t.page,10):1,this.filter.status=t&&t.status?t.status:this.filterDefaults.status,this.filter.since=t&&t.since?t.since:this.filterDefaults.since,this.filter.labels=t&&t.labels?t.labels:this.filterDefaults.labels,this.sort=t&&t.sort?t.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBuilds:function(){var t=this,e="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(e+="&filter[status]=pending&filter[status]=canceling");var r="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(r=this.filter.labels.split(",").join("&filter[labels]=")),this.axios.get("/api/builds?".concat(e,"&filter[since]=").concat(this.filter.since,"&filter[labels]=").concat(r,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size,"&sort=").concat(this.sort)).then((function(e){t.builds=e.data.items,t.pagination=e.data.pagination,t.loaded=!0,t.periodicallyRefreshBuilds(15)})).catch((function(e){t.periodicallyRefreshBuilds(15)}))},periodicallyRefreshBuilds:function(t){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var e=1e3*t*.75,r=1e3*t*1.25,i=Math.floor(Math.random()*(e-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuilds,i))},setSince:function(t){this.filter.since=t,this.pagination.page=1,this.updateQueryParams()}},computed:d({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(t,e){this.setDataFromQueryParams(t.query),this.loadBuilds()},pipeline:{handler:function(t,e){this.loadBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},b=(0,r(1900).Z)(m,i,[],!1,null,null,null);b.options.__file="src/views/AllBuilds.vue";var v=b.exports}}]);