(self.webpackChunkestafette_ci_web=self.webpackChunkestafette_ci_web||[]).push([[242],{648:function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.Z={methods:{queryGenerator:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),r.forEach((function(e){n(t,e,i[e])}))}return t}({},this.$route.query,t);for(var i in e)e[i]&&""!==e[i]||delete e[i];return e}}}},2705:function(t,e,n){var i=n(5639).Symbol;t.exports=i},9932:function(t){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},5377:function(t){t.exports=function(t){return t.split("")}},4239:function(t,e,n){var i=n(2705),r=n(9607),s=n(2333),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):s(t)}},4259:function(t){t.exports=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}},531:function(t,e,n){var i=n(2705),r=n(9932),s=n(1469),a=n(3448),o=i?i.prototype:void 0,l=o?o.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return r(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},180:function(t,e,n){var i=n(4259);t.exports=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}},8805:function(t,e,n){var i=n(180),r=n(2689),s=n(3140),a=n(9833);t.exports=function(t){return function(e){e=a(e);var n=r(e)?s(e):void 0,o=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return o[t]()+l}}},1957:function(t,e,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},9607:function(t,e,n){var i=n(2705),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,o=i?i.toStringTag:void 0;t.exports=function(t){var e=s.call(t,o),n=t[o];try{t[o]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[o]=n:delete t[o]),r}},2689:function(t){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5639:function(t,e,n){var i=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();t.exports=s},3140:function(t,e,n){var i=n(5377),r=n(2689),s=n(676);t.exports=function(t){return r(t)?s(t):i(t)}},676:function(t){var e="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:"+n+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+o+("(?:\\u200d(?:"+[r,s,a].join("|")+")"+l+o+")*"),c="(?:"+[r+n+"?",n,s,a,e].join("|")+")",f=RegExp(i+"(?="+i+")|"+c+u,"g");t.exports=function(t){return t.match(f)||[]}},1469:function(t){var e=Array.isArray;t.exports=e},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},3448:function(t,e,n){var i=n(4239),r=n(7005);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},9833:function(t,e,n){var i=n(531);t.exports=function(t){return null==t?"":i(t)}},1700:function(t,e,n){var i=n(8805)("toUpperCase");t.exports=i},3897:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input-group",{staticClass:"mb-3"},[n("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[n("font-awesome-icon",{attrs:{icon:"clock"}})],1),t._v(" "),n("b-form-select",{attrs:{options:t.sinceOptions},on:{change:t.onChange},model:{value:t.mutableModel,callback:function(e){t.mutableModel=e},expression:"mutableModel"}})],1)};i._withStripped=!0;var r=n(6982),s=n(6127),a=n(7754),o=n(8947),l=n(1436),u=n(7810);o.vI.add(l.SZw);var c={components:{BFormSelect:r.K,BInputGroup:s.w,BInputGroupPrepend:a.P,FontAwesomeIcon:u.GN},props:{model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{sinceOptions:[{value:"1h",text:"Since 1 hour ago"},{value:"1d",text:"Since 1 day ago"},{value:"1w",text:"Since 1 week ago"},{value:"1m",text:"Since 1 month ago"},{value:"1y",text:"Since 1 year ago"},{value:"eternity",text:"Since dawn of mankind"}],mutableModel:this.model}}},f=(0,n(1900).Z)(c,i,[],!1,null,null,null);f.options.__file="src/components/SinceSelector.vue";var p=f.exports},7817:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner-border estafette-spinner",class:t._f("bootstrapClass")(t.color,"text"),attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])};i._withStripped=!0;var r={props:{color:{type:String,default:null}}},s=(0,n(1900).Z)(r,i,[],!1,null,null,null);s.options.__file="src/components/Spinner.vue";var a=s.exports},3137:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row m-0"},[n("div",{staticClass:"col-12 col-sm-8 col-lg"}),t._v(" "),n("div",{staticClass:"col-12 col-sm-4 col-lg-3 p-0 text-right"},[n("since-selector",{attrs:{model:t.filter.since,"on-change":t.setSince}})],1)]),t._v(" "),n("div",{staticClass:"row ml-0"},t._l(t.statuses,(function(e){return n("stats-pipelines-count",{key:e,attrs:{filter:t.filter,status:e}})})),1),t._v(" "),n("div",{staticClass:"row ml-0"},t._l(t.statuses,(function(e){return n("stats-builds-count",{key:e,attrs:{filter:t.filter,status:e}})})),1),t._v(" "),n("div",{staticClass:"row ml-0"},t._l(t.statuses,(function(e){return n("stats-releases-count",{key:e,attrs:{filter:t.filter,status:e}})})),1)])};function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}i._withStripped=!0;var s={components:{StatsPipelinesCount:function(){return Promise.all([n.e(358),n.e(627)]).then(n.bind(n,4836))},StatsBuildsCount:function(){return Promise.all([n.e(358),n.e(627)]).then(n.bind(n,5794))},StatsReleasesCount:function(){return Promise.all([n.e(358),n.e(627)]).then(n.bind(n,7732))},SinceSelector:n(3897).Z},data:function(){return{filter:{since:"1d"},statuses:["all","succeeded","failed","running","canceled"]}},created:function(){this.setDataFromQueryParams(this.query)},methods:{setDataFromQueryParams:function(t){this.filter.since=t&&t.since?t.since:"1d",this.updateQueryParams()},updateQueryParams:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}({},this.$route.query),e=this.filter.since;t.since!==e&&(t.since=e,this.$router.push({query:t}))},setSince:function(t){this.filter.since=t,this.updateQueryParams()}}},a=(0,n(1900).Z)(s,i,[],!1,null,null,null);a.options.__file="src/views/InsightsCounters.vue";var o=a.exports},8796:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row m-0"},[n("div",{staticClass:"col-12 col-sm-8 col-lg"}),t._v(" "),n("div",{staticClass:"col-12 col-sm-4 col-lg-3 p-0 text-right"},[n("since-selector",{attrs:{model:t.filter.since,"on-change":t.setSince}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[n("stats-pipeline-ranking-table",{attrs:{filter:t.filter,type:"builds",status:"primary"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[n("stats-pipeline-ranking-table",{attrs:{filter:t.filter,type:"releases",status:"success"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[n("stats-label-ranking-table",{attrs:{filter:t.filter,type:"frequent",status:"warning"}})],1)])])};i._withStripped=!0;var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rounded border bg-white pt-1 pl-3 pr-3"},[n("h1",{staticClass:"text-center",class:"text-"+t.status},[t._v("\n    Most "+t._s(t.type)+"\n  ")]),t._v(" "),n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Pipeline")]),t._v(" "),n("th",[t._v(t._s(t._f("capitalize")(t.type)))])])]),t._v(" "),n("tbody",t._l(t.rows,(function(e,i){return n("router-link",{key:i,attrs:{to:{name:"PipelineOverview",params:{repoSource:e.repo_source,repoOwner:e.repo_owner,repoName:e.repo_name}},tag:"tr"}},[n("td",[t._v("\n          "+t._s(i+1+(t.pagination.page-1)*t.pagination.size)+"\n        ")]),t._v(" "),n("td",[n("span",{class:["text-muted","d-none d-sm-inline"]},[t._v(t._s(e.repo_source)+"/"+t._s(e.repo_owner)+"/")]),n("strong",[t._v(t._s(e.repo_name))])]),t._v(" "),n("td",[t._v("\n          "+t._s(e.nr_records)+"\n        ")])])})),1)]),t._v(" "),n("b-pagination",{attrs:{size:"md","total-rows":t.pagination.totalItems,"per-page":t.pagination.size,align:"center","hide-goto-end-buttons":""},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)};r._withStripped=!0;var s=n(962),a={components:{BPagination:s.c},props:{filter:{type:Object,default:null},type:{type:String,default:null},status:{type:String,default:null}},data:function(){return{rows:[],pagination:{page:1,size:15,totalPages:0,totalItems:0},refresh:!0}},created:function(){this.loadStat()},methods:{loadStat:function(){var t=this;this.axios.get("/api/stats/most".concat(this.type,"?filter[since]=").concat(this.filter.since,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(e){t.rows=e.data.items,t.pagination=e.data.pagination,t.periodicallyRefreshStat(15)})).catch((function(e){t.periodicallyRefreshStat(60)}))},periodicallyRefreshStat:function(t){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var e=1e3*t*.75,n=1e3*t*1.25,i=Math.floor(Math.random()*(e-n+1)+n);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))}},watch:{filter:{handler:function(t,e){this.loadStat()},deep:!0},"pagination.page":{handler:function(t,e){t!==e&&this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},o=n(1900),l=(0,o.Z)(a,r,[],!1,null,"84b8b88e",null);l.options.__file="src/components/StatsPipelineRankingTable.vue";var u=l.exports,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rounded border bg-white pt-1 pl-3 pr-3"},[n("h1",{staticClass:"text-center",class:"text-"+t.status},[t._v("\n    Most "+t._s(t.type)+" labels\n  ")]),t._v(" "),n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Label")]),t._v(" "),n("th",[t._v(t._s(t._f("capitalize")(t.type)))])])]),t._v(" "),n("tbody",t._l(t.rows,(function(e,i){return n("router-link",{key:i,attrs:{to:{name:"Pipelines",query:t.queryGenerator({labels:e.key+"="+e.value})},tag:"tr"}},[n("td",[t._v("\n          "+t._s(i+1+(t.pagination.page-1)*t.pagination.size)+"\n        ")]),t._v(" "),n("td",[n("span",{class:["text-muted"]},[t._v(t._s(e.key)+"=")]),n("strong",[t._v(t._s(e.value))])]),t._v(" "),n("td",[t._v("\n          "+t._s(e.pipelinescount)+"\n        ")])])})),1)]),t._v(" "),n("b-pagination",{attrs:{size:"md","total-rows":t.pagination.totalItems,"per-page":t.pagination.size,align:"center","hide-goto-end-buttons":""},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)};c._withStripped=!0;var f=n(648),p={components:{BPagination:s.c},props:{filter:{type:Object,default:null},type:{type:String,default:null},status:{type:String,default:null}},mixins:[f.Z],data:function(){return{rows:[],pagination:{page:1,size:15,totalPages:0,totalItems:0},refresh:!0}},created:function(){this.loadStat()},methods:{loadStat:function(){var t=this;this.axios.get("/api/labels/".concat(this.type,"?filter[since]=").concat(this.filter.since,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(e){t.rows=e.data.items,t.pagination=e.data.pagination,t.periodicallyRefreshStat(15)})).catch((function(e){t.periodicallyRefreshStat(60)}))},periodicallyRefreshStat:function(t){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var e=1e3*t*.75,n=1e3*t*1.25,i=Math.floor(Math.random()*(e-n+1)+n);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))}},watch:{filter:{handler:function(t,e){this.loadStat()},deep:!0},"pagination.page":{handler:function(t,e){t!==e&&this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},d=(0,o.Z)(p,c,[],!1,null,"c423c9c6",null);d.options.__file="src/components/StatsLabelRankingTable.vue";var h={components:{StatsPipelineRankingTable:u,StatsLabelRankingTable:d.exports,SinceSelector:n(3897).Z},data:function(){return{filter:{since:"1d"}}},created:function(){this.setDataFromQueryParams(this.query)},methods:{setDataFromQueryParams:function(t){this.filter.since=t&&t.since?t.since:"1d",this.updateQueryParams()},updateQueryParams:function(){this.$router.push({query:{since:this.filter.since}})},setSince:function(t){this.filter.since=t,this.updateQueryParams()}}},v=(0,o.Z)(h,i,[],!1,null,null,null);v.options.__file="src/views/InsightsRankings.vue";var m=v.exports},1610:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-xl-6"},[n("stats-adoption",{staticClass:"mb-3",attrs:{type:"builds",status:"primary"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-xl-6"},[n("stats-adoption",{staticClass:"mb-3",attrs:{type:"releases",status:"success"}})],1)])])};i._withStripped=!0;var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-0 graph"},[n("div",{staticClass:"rounded border bg-white"},[0==t.series[0].data.length?n("spinner",{attrs:{color:t.status}}):t._e(),t._v(" "),n("apexcharts",{attrs:{width:"100%",type:t.options.type,options:t.options,series:t.series}})],1)])};r._withStripped=!0;var s=n(7817),a=n(1700),o=n.n(a),l={components:{Spinner:s.Z,apexcharts:function(){return n.e(909).then(n.t.bind(n,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null}},data:function(){return{options:{chart:{id:"".concat(this.type,"-adoption-rate"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" adoption rate",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},subtitle:{text:"by repositories",align:"center",offsetY:35,style:{fontSize:"14px",color:"#6c757d"}},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:this.type}},colors:[this.getColor(this.status)],grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}}},series:[{name:o()(this.type),data:[]}],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(t){switch(t){case"primary":return"#007bff";case"success":return"#28a745"}return"#212529"},loadStat:function(){var t=this;this.axios.get("/api/stats/".concat(this.type,"adoption")).then((function(e){t.updateSeries(e.data.datetimes),t.periodicallyRefreshStat(60)})).catch((function(e){t.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(t){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var e=1e3*t*.75,n=1e3*t*1.25,i=Math.floor(Math.random()*(e-n+1)+n);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))},updateSeries:function(t){var e=[],n=0;t.forEach((function(t){e.push({x:t,y:++n})})),this.series[0].data=e}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},u=n(1900),c=(0,u.Z)(l,r,[],!1,null,null,null);c.options.__file="src/components/StatsAdoption.vue";var f={components:{StatsAdoption:c.exports}},p=(0,u.Z)(f,i,[],!1,null,null,null);p.options.__file="src/views/InsightsTrends.vue";var d=p.exports}}]);