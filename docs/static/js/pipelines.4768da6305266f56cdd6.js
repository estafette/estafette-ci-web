(self.webpackChunkestafette_ci_web=self.webpackChunkestafette_ci_web||[]).push([[640],{5270:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-badge",{staticClass:"mr-1",attrs:{to:{name:"CatalogGroupDetails",params:{id:e.group.id}},variant:"warning"}},[e._v("\n  "+e._s(e.group.name)+"\n")])};s._withStripped=!0;var r={components:{BBadge:i(6034).k},props:{group:{type:Object,default:null}}},a=(0,i(1900).Z)(r,s,[],!1,null,null,null);a.options.__file="src/components/GroupBadge.vue";var n=a.exports},9708:function(e,t,i){"use strict";i.d(t,{Z:function(){return m}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-nav",{staticClass:"m-3 d-none d-lg-flex",attrs:{tabs:""}},e._l(e.routes,(function(t){return i("b-nav-item",{key:t.name,class:t.meta&&t.meta.class?t.meta.class:"",attrs:{to:{name:t.name},exact:!!t.meta&&t.meta.exact}},[t.meta&&t.meta.icon?i("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:t.meta?t.meta.icon:""}}):e._e(),e._v(" "),i("span",[e._v("\n        "+e._s(t.meta&&t.meta.text?t.meta.text:t.name)+"\n      ")])],1)})),1),e._v(" "),i("b-dropdown",{staticClass:"m-3 d-lg-none",attrs:{variant:e.variant,block:"","menu-class":"w-100"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e.activeRouteIcon?i("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.activeRouteIcon}}):e._e(),e._v("\n      "+e._s(e.activeRouteText)+"\n    ")]},proxy:!0}])},[e._v(" "),e._l(e.routes,(function(t){return i("b-dropdown-item",{key:t.name,class:t.meta&&t.meta.class?t.meta.class:"",attrs:{to:{name:t.name},exact:!!t.meta&&t.meta.exact}},[t.meta&&t.meta.icon?i("font-awesome-icon",{staticClass:"dropdown-icon",attrs:{icon:t.meta?t.meta.icon:""}}):e._e(),e._v(" "),i("span",[e._v("\n        "+e._s(t.meta&&t.meta.text?t.meta.text:t.name)+"\n      ")])],1)}))],2)],1)};s._withStripped=!0;var r=i(629),a=i(9027),n=i(2450),o=i(5835),l=i(7379),c=i(8947),u=i(1436),p=i(7810);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}c.vI.add(u.DD4,u.U7t,u.ILF,u.FVb,u.Hw7,u.Kak,u.NkB,u.neB,u.BC0,u.E9T,u.OS1,u.nFo,u.Stf,u.m6i,u.Gg,u.jPh,u.CgH,u.cf$,u.o4t,u.X8G,u.BC0,u.Mm7,u.FL8,u.bJI);var f={components:{BNav:a.O,BNavItem:n.r,BDropdown:o.R,BDropdownItem:l.E,FontAwesomeIcon:p.GN},props:{sectionRouteName:{type:String,default:null}},methods:{isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){d(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"}),{routes:function(){var e=this,t=this.$route.matched[0].name,i=this.$router.options.routes.find((function(e){return e.name===t}));return i&&i.children?i.children.filter((function(t){return(!t.meta||!t.meta.hide)&&(!!(e.user&&e.user.active||t.meta&&t.meta.allowedWithoutAuth)&&!(t.meta&&t.meta.requiredRole&&!(e.user&&e.user.active&&e.user.roles&&e.user.roles.includes(t.meta.requiredRole))))})):[]},activeRouteText:function(){return this.$route.meta&&this.$route.meta.text?this.$route.meta.text:this.$route.name},activeRouteIcon:function(){if(this.$route.meta&&this.$route.meta.icon)return this.$route.meta.icon},section:function(){var e=this.$route.matched[0].name;return this.sectionRouteName&&(e=this.sectionRouteName),this.$router.options.routes.find((function(t){return t.name===e}))},variant:function(){var e=this.section;return e&&e.meta&&e.meta.variant?e.meta.variant:"secondary"}})},h=(0,i(1900).Z)(f,s,[],!1,null,null,null);h.options.__file="src/components/InnerNavigationTabs.vue";var m=h.exports},2901:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.logCount>0?i("b-button-group",{staticClass:"mb-3 bg-white"},[e._l(e.logs,(function(t,s){return i("b-button",{key:t.id,class:[t.id===e.logid?"active":"border-btn-group"],attrs:{to:{params:{logid:t.id}},"active-class":"router-link-active",variant:"outline-primary",title:t.insertedAt}},[e._v("\n    "+e._s(s+1)+" / "+e._s(e.logCount)+"\n  ")])})),e._v(" "),"pending"===e.status||"running"===e.status||"canceling"===e.status?i("b-button",{class:[e.logid?"border-btn-group":"active"],attrs:{to:{params:{logid:null}},"active-class":"router-link-active",variant:"outline-primary"}},[e._v("\n    "+e._s(e.logCount)+" / "+e._s(e.logCount)+" "),i("font-awesome-icon",{attrs:{icon:"stream"}})],1):e._e()],2):e._e()};s._withStripped=!0;var r=i(5969),a=i(5193),n=i(648),o=i(8947),l=i(1436),c=i(7810);o.vI.add(l.aC2);var u={components:{BButtonGroup:r.a,BButton:a.T,FontAwesomeIcon:c.GN},mixins:[n.Z],props:{logUrl:{type:String,default:null},routeName:{type:String,default:null},status:{type:String,default:null},logid:{type:String,default:null}},data:function(){return{logs:[],refresh:!0}},created:function(){this.loadAllLogs()},methods:{loadAllLogs:function(){var e=this;this.axios.get(this.logUrl).then((function(t){e.logs=t.data.items,e.redirectIfNeeded(),e.periodicallyRefresh(15)})).catch((function(t){e.periodicallyRefresh(30)}))},redirectIfNeeded:function(){this.logid||"pending"!==this.status&&"running"!==this.status&&"canceling"!==this.status&&0!==this.logs.length&&this.$router.replace({params:{logid:this.logs[this.logs.length-1].id}})},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadAllLogs,s))}},computed:{logCount:function(){return"pending"===this.status||"running"===this.status||"canceling"===this.status?this.logs.length+1:this.logs.length}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},p=(0,i(1900).Z)(u,s,[],!1,null,null,null);p.options.__file="src/components/LogNavigation.vue";var d=p.exports},9828:function(e,t,i){"use strict";i.d(t,{Z:function(){return P}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.steps&&e.steps.length>0?i("div",{staticClass:"accordion m-3"},[i("b-form-group",{staticClass:"m-3",attrs:{description:"Estafette injects stages for handling cross-cutting concerns. Check to see the injected stages."}},[i("b-form-checkbox",{model:{value:e.showInjectedStages,callback:function(t){e.showInjectedStages=t},expression:"showInjectedStages"}},[e._v("\n      Show injected stages\n    ")])],1),e._v(" "),e.hasTruncatedLogs?i("b-form-group",{staticClass:"m-3",attrs:{description:"Estafette truncates logs when a stage has more than "+e.maxLinesToShow+" lines. Check to see the full logs."}},[i("b-form-checkbox",{model:{value:e.showTruncatedLogs,callback:function(t){e.showTruncatedLogs=t},expression:"showTruncatedLogs"}},[e._v("\n      Show full logs\n    ")])],1):e._e(),e._v(" "),e._m(0),e._v(" "),i("div",{attrs:{role:"tablist"}},e._l(e.filteredSteps,(function(t){return i("b-card",{key:t.key,staticClass:"log-stage-block",attrs:{"no-body":""}},[i("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"step.collapseID"}],staticClass:"row m-0 pt-3 pr-2 pb-3 pl-2 clickable border-0 rounded-0",attrs:{role:"tab"}},[i("property-block",{staticClass:"col-xxxl-1 text-xxxl-center",attrs:{label:"Status",value:t.status}},[i("span",{staticClass:"badge mt-2",class:e._f("bootstrapClass")(t.status,"badge")},[e._v("\n            "+e._s(t.status)+"\n          ")]),e._v(" "),i("log-warning",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1),e._v(" "),i("property-block",{staticClass:"col-xxxl-4",attrs:{label:"Stage","value-css-class":"h4",value:t.step}},[e._v("\n          "+e._s(t.step)+"\n          "),t.autoInjected?i("span",{staticClass:"small text-muted",attrs:{title:"This step is automatically injected by Estafette CI"}},[e._v("\n            (injected)\n          ")]):e._e()]),e._v(" "),i("property-block",{staticClass:"col-xxxl-3",attrs:{label:"Image"}},[t.image&&t.image.name?i("span",{attrs:{title:t.image.name+":"+t.image.tag}},[e._v("\n            "+e._s(t.image.name)+":"+e._s(t.image.tag)+"\n            "),t.image.isTrusted?i("font-awesome-icon",{staticClass:"small text-muted",attrs:{icon:"shield-alt",title:"This image is configured as trusted by Estafette CI"}}):e._e(),e._v(" "),t.image.hasInjectedCredentials?i("font-awesome-icon",{staticClass:"small text-muted",attrs:{icon:"key",title:"This image has injected credentials"}}):e._e()],1):i("span",[e._v("\n            -\n          ")])]),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Image size"}},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image&&t.image.imageSize?i("span",{attrs:{title:e._f("formatBytes")(t.image.imageSize)}},[e._v("\n              "+e._s(e._f("formatBytes")(t.image.imageSize))+"\n            ")]):i("em",{staticClass:"text-muted"},[e._v("\n              (cached)\n            ")])]):i("span",[e._v("\n            -\n          ")])]),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Pull time"}},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image.pullDuration&&t.image.pullDuration>0?i("span",{attrs:{title:e._f("formatDuration")(t.image.pullDuration)}},[e._v("\n              "+e._s(e._f("formatDuration")(t.image.pullDuration))+"\n            ")]):i("em",{staticClass:"text-muted"},[e._v("\n              (cached)\n            ")])]):i("span",[e._v("\n            -\n          ")])]),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Execution time",value:e._f("formatDuration")(t.duration)}},[!t.duration||"SUCCEEDED"!=t.status&&"FAILED"!=t.status?i("span",[e._v("\n            -\n          ")]):i("span",[e._v("\n            "+e._s(e._f("formatDuration")(t.duration))+"\n          ")])]),e._v(" "),i("property-block",{staticClass:"col-xxxl-1 text-xxxl-right",attrs:{label:"Total time",value:e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration)}},[!t.image||"RUNNING"!=t.status&&"SUCCEEDED"!=t.status&&"FAILED"!=t.status?i("span",[e._v("\n            -\n          ")]):i("span",[e._v("\n            "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n          ")])])],1),e._v(" "),t.services&&t.services.length>0?i("b-card-header",{staticClass:"row m-0 p-2 border-0 rounded-0 justify-content-center",attrs:{role:"tab"}},[i("property-block",{attrs:{label:"Service containers",wide:"","label-css-class":"d-xxxl-block"}},e._l(t.services,(function(t){return i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"service.collapseID"}],key:t.key,staticClass:"mr-2 mb-1",attrs:{variant:e._f("bootstrapVariant")(t.status,!0),title:t.step}},[e._v("\n            "+e._s(t.step)+"\n            "),i("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")]),e._v(" "),i("log-warning",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1)})),1)],1):e._e(),e._v(" "),t.nestedSteps&&t.nestedSteps.length>0?i("b-card-header",{staticClass:"row m-0 p-2 border-0 rounded-0 justify-content-center",attrs:{role:"tab"}},[i("property-block",{attrs:{label:"Parallel stages",wide:"","label-css-class":"d-xxxl-block"}},e._l(t.nestedSteps,(function(t){return i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"nestedStep.collapseID"}],key:t.key,staticClass:"mr-2 mb-1",attrs:{variant:e._f("bootstrapVariant")(t.status,!0),title:t.step}},[e._v("\n            "+e._s(t.step)+"\n            "),i("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")]),e._v(" "),i("log-warning",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1)})),1)],1):e._e(),e._v(" "),i("b-collapse",{staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,visible:"RUNNING"===t.status||"FAILED"===t.status,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.visible&&t.logLines&&t.logLines.length>0?i("div",{staticClass:"text-light text-monospace bg-dark m-0 p-3"},e._l(e.cappedLogLines(t.logLines),(function(t,s){return i("div",{key:t.line?t.line:s,staticClass:"row no-gutters"},[i("div",{staticClass:"col-1 log-timestamp text-white-50 d-none d-xl-flex"},[e._v("\n              "+e._s(e._f("moment")(t.timestamp,"YYYY-MM-DD HH:mm:ss"))+"\n            ")]),e._v(" "),i("div",{staticClass:"col log-text",domProps:{innerHTML:e._s(e.formatLog(t.text))}})])})),0):e._e()]}}],null,!0)}),e._v(" "),e._l(t.services,(function(t){return i("b-collapse",{key:t.collapseID,staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.visible?i("div",{staticClass:"row m-0 pt-3 pr-2 pb-3 pl-2 border-0 rounded-0 bg-light"},[i("div",{staticClass:"col-4 col-md-2 col-xl-1 text-center"}),e._v(" "),i("div",{staticClass:"col-8 col-lg-5 col-xl-4 text-truncate h4",attrs:{title:t.step}}),e._v(" "),i("div",{staticClass:"col-4 col-xl-3 d-none d-lg-flex text-truncate"},[t.image&&t.image.name?i("span",[e._v("\n              "+e._s(t.image.name)+":"+e._s(t.image.tag)+"\n              "),t.image.isTrusted?i("font-awesome-icon",{staticClass:"small text-muted",attrs:{icon:"shield-alt",title:"This image is configured as trusted by Estafette CI"}}):e._e(),e._v(" "),t.image.hasInjectedCredentials?i("font-awesome-icon",{staticClass:"small text-muted",attrs:{icon:"key",title:"This image has injected credentials"}}):e._e()],1):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image&&t.image.imageSize?i("span",[e._v("\n                "+e._s(e._f("formatBytes")(t.image.imageSize))+"\n              ")]):i("em",{staticClass:"text-muted"},[e._v("\n                (cached)\n              ")])]):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image.pullDuration&&t.image.pullDuration>0?i("span",[e._v("\n                "+e._s(e._f("formatDuration")(t.image.pullDuration))+"\n              ")]):i("em",{staticClass:"text-muted"},[e._v("\n                (cached)\n              ")])]):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[!t.duration||"SUCCEEDED"!=t.status&&"FAILED"!=t.status?e._e():i("span",[e._v("\n              "+e._s(e._f("formatDuration")(t.duration))+"\n            ")])]),e._v(" "),i("div",{staticClass:"col-2 col-lg-1 text-right d-none d-md-flex"},[!t.image||"RUNNING"!=t.status&&"SUCCEEDED"!=t.status&&"FAILED"!=t.status?e._e():i("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")])])]):e._e(),e._v(" "),t.logLines&&t.logLines.length>0?i("div",{staticClass:"text-light text-monospace bg-dark m-0 p-3"},e._l(e.cappedLogLines(t.logLines),(function(t,s){return i("div",{key:t.line?t.line:s,staticClass:"row no-gutters"},[i("div",{staticClass:"col-1 log-timestamp text-white-50 d-none d-xl-flex"},[e._v("\n              "+e._s(e._f("moment")(t.timestamp,"YYYY-MM-DD HH:mm:ss"))+"\n            ")]),e._v(" "),i("div",{staticClass:"col log-text",domProps:{innerHTML:e._s(e.formatLog(t.text))}})])})),0):e._e()]}}],null,!0)})})),e._v(" "),e._l(t.nestedSteps,(function(t){return i("b-collapse",{key:t.collapseID,staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.visible?i("div",{staticClass:"row m-0 pt-3 pr-2 pb-3 pl-2 border-0 rounded-0 bg-light"},[i("div",{staticClass:"col-4 col-md-2 col-xl-1 text-center"}),e._v(" "),i("div",{staticClass:"col-8 col-lg-5 col-xl-4 text-truncate h4",attrs:{title:t.step}}),e._v(" "),i("div",{staticClass:"col-4 col-xl-3 d-none d-lg-flex text-truncate"},[t.image&&t.image.name?i("span",[e._v("\n              "+e._s(t.image.name)+":"+e._s(t.image.tag)+"\n              "),t.image.isTrusted?i("font-awesome-icon",{staticClass:"small text-muted mb-1",attrs:{icon:"shield-alt",title:"This image is configured as trusted by Estafette CI"}}):e._e(),e._v(" "),t.image.hasInjectedCredentials?i("font-awesome-icon",{staticClass:"small text-muted",attrs:{icon:"key",title:"This image has injected credentials"}}):e._e()],1):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image&&t.image.imageSize?i("span",[e._v("\n                "+e._s(e._f("formatBytes")(t.image.imageSize))+"\n              ")]):i("em",{staticClass:"text-muted"},[e._v("\n                (cached)\n              ")])]):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?i("span",[t.image.pullDuration&&t.image.pullDuration>0?i("span",[e._v("\n                "+e._s(e._f("formatDuration")(t.image.pullDuration))+"\n              ")]):i("em",{staticClass:"text-muted"},[e._v("\n                (cached)\n              ")])]):e._e()]),e._v(" "),i("div",{staticClass:"col-1 text-right d-none d-xl-flex"},[!t.duration||"SUCCEEDED"!=t.status&&"FAILED"!=t.status?e._e():i("span",[e._v("\n              "+e._s(e._f("formatDuration")(t.duration))+"\n            ")])]),e._v(" "),i("div",{staticClass:"col-2 col-lg-1 text-right d-none d-md-flex"},[!t.image||"RUNNING"!=t.status&&"SUCCEEDED"!=t.status&&"FAILED"!=t.status?e._e():i("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")])])]):e._e(),e._v(" "),t.logLines&&t.logLines.length>0?i("div",{staticClass:"text-light text-monospace bg-dark m-0 p-3"},e._l(e.cappedLogLines(t.logLines),(function(t,s){return i("div",{key:t.line?t.line:s,staticClass:"row no-gutters"},[i("div",{staticClass:"col-1 log-timestamp text-white-50 d-none d-xl-flex"},[e._v("\n              "+e._s(e._f("moment")(t.timestamp,"YYYY-MM-DD HH:mm:ss"))+"\n            ")]),e._v(" "),i("div",{staticClass:"col log-text",domProps:{innerHTML:e._s(e.formatLog(t.text))}})])})),0):e._e()]}}],null,!0)})}))],2)})),1),e._v(" "),i("div",{staticClass:"log-summary-block"},[i("property-block",{staticClass:"col-xxxl-1 text-xxxl-center",attrs:{label:"Status",value:e.totalStatus}},[i("span",{staticClass:"badge",class:e._f("bootstrapClass")(e.totalStatus,"badge")},[e._v("\n        "+e._s(e.totalStatus)+"\n      ")])]),e._v(" "),i("div",{staticClass:"property-block col-xxxl-4"}),e._v(" "),i("div",{staticClass:"property-block col-xxxl-3"}),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Total image size",value:e._f("formatBytes")(e.totalImageSize)}}),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Total pull time",value:e._f("formatDuration")(e.totalPullDuration)}}),e._v(" "),i("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-xxxl-right",attrs:{label:"Total execution time",value:e._f("formatDuration")(e.totalDuration)}}),e._v(" "),i("property-block",{staticClass:"col-xxxl-1 text-xxxl-right",attrs:{label:"Total time",value:e._f("formatDuration")(e.totalPullDuration+e.totalDuration)}})],1),e._v(" "),i("div",{staticClass:"log-buttons"},[i("b-nav",{attrs:{vertical:""}},[i("b-nav-item",{on:{click:e.scrollUp}},[i("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"chevron-up"}})],1),e._v(" "),e.isTailing()?i("b-nav-item",{on:{click:e.scrollToggle}},[i("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:e.scrollEnabled?"eye-slash":"eye"}})],1):e._e(),e._v(" "),i("b-nav-item",{on:{click:e.scrollDown}},[i("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"chevron-down"}})],1)],1)],1)],1):i("div",{staticClass:"m-3"},[e._v("\n  Hold on, we're waiting for the logs to come in!\n")])};s._withStripped=!0;var r=i(3279),a=i.n(r),n=i(4431),o=i.n(n),l=i(5193),c=i(9952),u=i(7047),p=i(6336),d=i(4951),f=i(4058),h=i(9027),m=i(2450),g=i(3028),v=i(5322),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.step&&e.step.logLines&&e.step.logLines.length>e.maxLinesToShow?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger",attrs:{title:"This stage has a total of "+e.step.logLines.length+" log lines; please make it less verbose to avoid it getting truncated"}},[i("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1):e._e()};b._withStripped=!0;var _=i(8947),y=i(1436),w=i(7810);_.vI.add(y.eHv);var x={components:{FontAwesomeIcon:w.GN},props:{step:{type:Object,default:null},maxLinesToShow:{type:Number,default:1e3}}},S=i(1900),C=(0,S.Z)(x,b,[],!1,null,null,null);C.options.__file="src/components/LogWarning.vue";var T=C.exports;_.vI.add(y.U7t,y.DD4,y.Mdf,y.Aq,y.mTx,y.ptq);var O={components:{BButton:l.T,BCard:c._,BCardHeader:u.p,BCollapse:p.k,BFormCheckbox:d.l,BFormGroup:f.x,PropertyBlock:v.Z,LogWarning:T,FontAwesomeIcon:w.GN,BNav:h.O,BNavItem:m.r},directives:{"b-toggle":g.MD},props:{logUrl:{type:String,default:null},status:{type:String,default:null},allowTail:{type:Boolean,default:!1}},data:function(){return{steps:[],refresh:!0,tailedSteps:[],showInjectedStages:!1,maxLinesToShow:500,maxLinesToShowWhenTailing:50,showTruncatedLogs:!1,scrollEnabled:!0}},computed:{filteredSteps:function(){var e=this;return this.steps?this.steps.filter((function(t){return!t.autoInjected||e.showInjectedStages||"PENDING"===t.status||"RUNNING"===t.status||"FAILED"===t.status})).map((function(e){return e.key=e.step+"-"+(e.runIndex?e.runIndex:0),e.collapseID="accordion-"+e.key,e.services&&(e.services=e.services.map((function(t){return t.key=e.step+"-"+(e.runIndex?e.runIndex:0)+"-service-"+t.step,t.collapseID="accordion-"+t.key,t}))),e.nestedSteps&&(e.nestedSteps=e.nestedSteps.map((function(t){return t.key=e.step+"-"+(e.runIndex?e.runIndex:0)+"-"+t.step,t.collapseID="accordion-"+t.key,t}))),e})):[]},totalImageSize:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.image&&t.image.imageSize?t.image.imageSize:0)}),0):0},totalPullDuration:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.image&&t.image.pullDuration?t.image.pullDuration:0)}),0):0},totalDuration:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.duration?t.duration:0)}),0):0},totalStatus:function(){return this.steps?this.steps.reduce((function(e,t){return"CANCELED"===e||"CANCELED"===t.status?"CANCELED":"FAILED"===e||"FAILED"===t.status?"FAILED":"PENDING"===t.status||"RUNNING"===t.status?"RUNNING":"SUCCEEDED"}),"SUCCEEDED"):""},hasTruncatedLogs:function(){var e=this;return this.filteredSteps&&this.filteredSteps.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow||t.services&&t.services.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow}))||t.nestedSteps&&t.nestedSteps.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow}))}))}},created:function(){this.allowTail?this.tailLogs():this.loadLogs()},methods:{formatLog:function(e){return e?(new(o())).ansi_to_html(e):e},loadLogs:function(){var e=this;this.allowTail&&"succeeded"!==this.status&&"failed"!==this.status&&"canceled"!==this.status?this.periodicallyRefreshLogs(2):(this.tailedSteps=[],this.axios.get(this.logUrl).then((function(t){t.data.steps?e.steps=t.data.steps:e.steps=t.data})).catch((function(t){e.periodicallyRefreshLogs(2)})))},periodicallyRefreshLogs:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadLogs,s))},cappedLogLines:function(e){if(!e||e.length<=this.maxLinesToShow||this.showTruncatedLogs)return e;var t=e.slice(0,5),i=e.slice(5,8).map((function(e,t){return 1===t?{line:e.line,timestamp:null,streamType:e.streamType,text:"== TOO MANY LINES; TRUNCATED BY ESTAFETTE; SHOW ALL BY CHECKING 'SHOW FULL LOGS' =="}:{line:e.line,timestamp:null,streamType:e.streamType,text:" "}})),s=e.slice(e.length-this.maxLinesToShow+5+3);return t.concat(i).concat(s)},isTailing:function(){return this.allowTail&&("pending"===this.status||"running"===this.status||"canceling"===this.status)},tailLogs:function(){var e=this;this.isTailing()?(this.es=new EventSource("".concat(this.logUrl,".stream")),this.es.addEventListener("log",(function(t){if("pending"!==e.status&&"running"!==e.status&&"canceling"!==e.status)return e.es.close(),document.getElementById("main").scrollIntoView(!0),void e.loadLogs();var i=JSON.parse(t.data),s="stage";if(i.type&&(s=i.type),!i.type&&(!i.depth||0===i.depth)||i.type&&"stage"===s&&!i.parentStage){var r=e.tailedSteps.findIndex((function(e){return e===i.step})),a=r>-1?e.steps[r]:null;if(-1===r){var n="RUNNING";i.status&&(n=i.status),a={step:i.step,logLines:[],nestedSteps:[],services:[],exitCode:0,status:n,autoInjected:i.autoInjected,duration:0,lastLineNumber:0},e.tailedSteps.push(i.step),e.steps.push(a),r=e.steps.length-1}if(r!==e.tailedSteps.length-1)return;i.image&&(a.image=i.image),i.status&&(a.status=i.status),i.exitCode&&(a.exitCode=i.exitCode),i.duration&&(a.duration=i.duration),i.logLine&&i.logLine.line>a.lastLineNumber&&(a.logLines.push(i.logLine),a.lastLineNumber=i.logLine.line,i.logLine.line>e.maxLinesToShowWhenTailing&&a.logLines.shift())}else if(e.steps.length>0){var o,l,c=e.steps[e.steps.length-1];if(i.parentStage){var u=e.tailedSteps.findIndex((function(e){return e===i.parentStage}));u>-1&&(c=e.steps[u])}if("service"===s){if(l=(o=c.services.findIndex((function(e){return e.step===i.step})))>-1?c.services[o]:null,-1===o){var p="RUNNING";i.status&&(p=i.status),l={step:i.step,logLines:[],exitCode:0,status:p,autoInjected:!1,duration:0,lastLineNumber:0},c.services.push(l)}}else if(l=(o=c.nestedSteps.findIndex((function(e){return e.step===i.step})))>-1?c.nestedSteps[o]:null,-1===o){var d="RUNNING";i.status&&(d=i.status),l={step:i.step,logLines:[],exitCode:0,status:d,autoInjected:!1,duration:0,lastLineNumber:0},c.nestedSteps.push(l)}i.image&&(l.image=i.image),i.status&&(l.status=i.status),i.exitCode&&(l.exitCode=i.exitCode),i.duration&&(l.duration=i.duration),i.logLine&&i.logLine.line>l.lastLineNumber&&(l.logLines.push(i.logLine),l.lastLineNumber=i.logLine.line,i.logLine.line>e.maxLinesToShowWhenTailing&&l.logLines.shift())}e.scrollToLogTail()}),!1),this.es.addEventListener("close",(function(t){e.es.close(),document.getElementById("main").scrollIntoView(!0),e.loadLogs()}),!1),this.es.onerror=function(e){console.warn(e)}):this.loadLogs()},scrollToLogTail:a()((function(){this.scrollEnabled&&this.$el.scrollIntoView(!1)}),1e3,{maxWait:5e3}),scrollToggle:function(){this.scrollEnabled=!this.scrollEnabled},scrollUp:function(){this.scrollEnabled=!1,window.scrollTo(0,0)},scrollDown:function(){this.scrollEnabled=!1,window.scrollTo(0,document.body.scrollHeight)}},watch:{$route:function(e,t){this.es&&this.es.close(),this.steps=[],this.tailedSteps=[],this.allowTail?this.tailLogs():this.loadLogs()}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.es&&this.es.close()}},D=(0,S.Z)(O,s,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row-header"},[i("div",{staticClass:"col-1 text-center"},[e._v("\n      Status\n    ")]),e._v(" "),i("div",{staticClass:"col-4"},[e._v("\n      Stage\n    ")]),e._v(" "),i("div",{staticClass:"col-3"},[e._v("\n      Image\n    ")]),e._v(" "),i("div",{staticClass:"col-1 text-right"},[e._v("\n      Image size\n    ")]),e._v(" "),i("div",{staticClass:"col-1 text-right"},[e._v("\n      Pull time\n    ")]),e._v(" "),i("div",{staticClass:"col-1 text-right"},[e._v("\n      Execution time\n    ")]),e._v(" "),i("div",{staticClass:"col-1 text-right"},[e._v("\n      Total time\n    ")])])}],!1,null,"5023e914",null);D.options.__file="src/components/LogViewer.vue";var P=D.exports},9818:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"row-block list-complete-item",attrs:{to:{name:"PipelineReleaseLogs",params:{repoSource:e.release.repoSource,repoOwner:e.release.repoOwner,repoName:e.release.repoName,releaseID:e.release.id}},tag:"div"}},[e.allReleasesMode?i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Pipeline"}},[i("repository-title",{attrs:{repo:e.release}})],1):e._e(),e._v(" "),i("property-block",{staticClass:"col-xxxl-2",attrs:{label:e.release.action?"Target + action":"Target",value:e.release.action?e.release.name+" / "+e.release.action:e.release.name}},[e._v("\n    "+e._s(e.release.name)),e.release.action?i("span",[e._v("\n      / "+e._s(e.release.action)+"\n    ")]):e._e()]),e._v(" "),i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Version",value:e.release.releaseVersion}}),e._v(" "),i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Status",value:e.release.releaseStatus}},[i("b-progress",[i("b-progress-bar",{attrs:{value:e.$options.filters.releaseProgressBarValue(e.pipeline,e.release,e.now),label:e.$options.filters.releaseProgressBarLabel(e.pipeline,e.release,e.now),variant:e.$options.filters.bootstrapVariant(e.release.releaseStatus),animated:e.$options.filters.animatedProgressBar(e.release.releaseStatus)}})],1)],1),e._v(" "),i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Released at"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.release.insertedAt))+"\n    "),i("duration-label",{attrs:{duration:e.release.duration,"pending-duration":e.release.pendingDuration}})],1),e._v(" "),i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Triggered by"}},[i("triggered-by",{attrs:{events:e.release.triggerEvents}})],1),e._v(" "),e.showActions?i("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Actions"}},[i("cancel-button",{attrs:{release:e.release}})],1):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(5752),n=i(2981),o=i(8418),l=i(9325),c=i(5322),u=i(6342),p=i(8714),d=i(3900);function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h={components:{BProgress:a.D,BProgressBar:n.Q,CancelButton:o.Z,TriggeredBy:l.Z,PropertyBlock:c.Z,DurationLabel:u.Z,RepositoryTitle:p.Z},props:{release:{type:Object,default:null},pipeline:{type:Object,default:null},allReleasesMode:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus||d.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){f(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"}),{showActions:function(){return!this.allReleasesMode&&this.user&&this.user.active&&this.release&&("pending"===this.release.releaseStatus||"running"===this.release.releaseStatus||"canceling"===this.release.releaseStatus)}})},m=(0,i(1900).Z)(h,s,[],!1,null,null,null);m.options.__file="src/components/ReleaseRow.vue";var g=m.exports},9325:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.events&&e.events.length>0?i("div",e._l(e.events,(function(t,s){return i("div",{key:s},[t.pipeline?i("div",{attrs:{title:t.pipeline.repoSource+" / "+t.pipeline.repoOwner+" / "+t.pipeline.repoName}},[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"tools"}}),e._v(" "),i("router-link",{staticClass:"text-body",attrs:{to:{name:"PipelineOverview",params:{repoSource:t.pipeline.repoSource,repoOwner:t.pipeline.repoOwner,repoName:t.pipeline.repoName}}}},[e._v("\n        "+e._s(t.pipeline.repoSource)+"/"+e._s(t.pipeline.repoOwner)+"/"+e._s(t.pipeline.repoName)+"\n      ")])],1):e._e(),e._v(" "),t.release?i("div",{attrs:{title:t.release.repoSource+" / "+t.release.repoOwner+" / "+t.release.repoName}},[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"upload"}}),e._v(" "),i("router-link",{staticClass:"text-body",attrs:{to:{name:"PipelineReleases",params:{repoSource:t.release.repoSource,repoOwner:t.release.repoOwner,repoName:t.release.repoName}}}},[e._v("\n        "+e._s(t.release.repoSource)+"/"+e._s(t.release.repoOwner)+"/"+e._s(t.release.repoName)+"\n      ")])],1):e._e(),e._v(" "),t.git?i("div",{attrs:{title:t.git.repository}},[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),i("a",{staticClass:"text-body",attrs:{href:"https://"+t.git.repository,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n        "+e._s(t.git.repository)+"\n      ")])],1):e._e(),e._v(" "),t.pubsub?i("div",{attrs:{title:"projects/"+t.pubsub.project+"/topics/"+t.pubsub.topic}},[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"bezier-curve"}}),e._v("\n        projects/"+e._s(t.pubsub.project)+"/topics/"+e._s(t.pubsub.topic)+"\n      ")],1)]):e._e(),e._v(" "),t.docker?i("div"):e._e(),e._v(" "),t.cron?i("div",{attrs:{title:t.cron.time}},[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"clock"}}),e._v("\n      "+e._s(t.cron.time)+"\n    ")],1):e._e(),e._v(" "),t.manual?i("div",{attrs:{title:t.manual.userID}},[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"user-circle"}}),e._v("\n      "+e._s(t.manual.userID)+"\n    ")],1):e._e()])})),0):e._e()};s._withStripped=!0;var r=i(8947),a=i(1436),n=i(7810);r.vI.add(a.CgH,a.cf$,a.m08,a.SZw,a.mh3,a.izv);var o={components:{FontAwesomeIcon:n.GN},props:{events:{type:Array,default:null}}},l=(0,i(1900).Z)(o,s,[],!1,null,null,null);l.options.__file="src/components/TriggeredBy.vue";var c=l.exports},923:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-alert",{staticClass:"d-flex flex-row h-100",attrs:{variant:e.$options.filters.bootstrapVariant(this.warning.status),show:""}},[i("mark-down",[e._v(e._s(e.warning.message))])],1)};s._withStripped=!0;var r={components:{BAlert:i(3106).F,MarkDown:function(){return i.e(41).then(i.bind(i,300))}},props:{warning:{type:Object,default:null}}},a=(0,i(1900).Z)(r,s,[],!1,null,null,null);a.options.__file="src/components/Warning.vue";var n=a.exports},8907:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return F}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row m-0"},[i("div",{staticClass:"col-12 col-lg-6 col-xxl-4"},[i("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[i("pipeline-filter",{attrs:{model:e.filter.search,"on-input":e.setSearch}})],1),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[i("release-target-filter",{attrs:{filter:e.filter,model:e.filter.target,"on-change":e.setTarget}})],1),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[i("frequent-labels",{attrs:{filter:e.filter}})],1),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[i("since-selector",{attrs:{model:e.filter.since,"on-change":e.setSince}})],1)]),e._v(" "),i("div",{staticClass:"row m-0"},[i("div",{staticClass:"col-12 col-lg-9"},[i("user-filter",{attrs:{filter:e.filter}}),e._v(" "),i("label-filter",{attrs:{filter:e.filter}})],1),e._v(" "),i("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[i("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),i("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:e.fields}}),e._v(" "),e.pipelines.length>0?i("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.pipelines,(function(t){return i("pipeline-row",{key:t.repoSource+"/"+t.repoOwner+"/"+t.repoName,attrs:{pipeline:t,filter:e.filter}})})),1):e.loaded?i("div",{staticClass:"alert alert-warning text-center p-5 m-3"},[e._v("\n    There are no pipelines for the current filters. Please increase the time range or remove some filters!\n  ")]):i("div",[i("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.pipelines.length>0?i("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(3279),n=i.n(a),o=i(648),l=i(7817),c=i(1178),u=i(1826),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user&&e.user.active?i("b-button-group",{staticClass:"mb-3 bg-white"},[i("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines you recently committed to or released"}},[i("font-awesome-icon",{attrs:{icon:"user"}})],1),e._v(" "),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["false"===e.filter.recentCommitter&&"false"===e.filter.recentReleaser?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"false",recentReleaser:"false",page:1})},"active-class":"router-link-active",variant:"light",title:"Everyone's pipelines"},on:{click:function(e){return e.target.blur()}}},[i("font-awesome-icon",{attrs:{icon:"users"}})],1),e._v(" "),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["true"===e.filter.recentCommitter?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"true",recentReleaser:"false",page:1})},"active-class":"router-link-active",variant:"light",title:"Pipelines you recently committed to"},on:{click:function(e){return e.target.blur()}}},[i("font-awesome-icon",{attrs:{icon:"tools"}})],1),e._v(" "),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["true"===e.filter.recentReleaser?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"false",recentReleaser:"true",page:1})},"active-class":"router-link-active",variant:"light",title:"Pipelines you recently released"},on:{click:function(e){return e.target.blur()}}},[i("font-awesome-icon",{attrs:{icon:"upload"}})],1)],1):e._e()};p._withStripped=!0;var d=i(5969),f=i(5193),h=i(7754),m=i(8947),g=i(1436),v=i(7810);function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}m.vI.add(g.ILF,g.FVb,g.CgH,g.cf$);var _={components:{BButtonGroup:d.a,BButton:f.T,BInputGroupPrepend:h.P,FontAwesomeIcon:v.GN},mixins:[o.Z],props:{filter:{type:Object,default:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){b(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"}))},y=i(1900),w=(0,y.Z)(_,p,[],!1,null,null,null);w.options.__file="src/components/UserFilter.vue";var x=w.exports,S=i(7651),C=i(6388),T=i(5773),O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-input-group",{staticClass:"mb-3"},[i("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[i("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),i("b-form-select",{attrs:{options:e.releaseTargetOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};O._withStripped=!0;var D=i(6982),P=i(6127);m.vI.add(g.cf$);var k={components:{BFormSelect:D.K,BInputGroup:P.w,BInputGroupPrepend:h.P,FontAwesomeIcon:v.GN},props:{filter:{type:Object,default:null},model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{targets:[],pagination:{page:1,size:15},refresh:!0,mutableModel:this.model}},created:function(){this.loadReleaseTargets()},methods:{loadReleaseTargets:function(){var e=this,t="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(t=this.filter.labels.split(",").join("&filter[labels]="));var i="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(i+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/releasetargets?".concat(i,"&filter[since]=").concat(this.filter.since,"&filter[search]=").concat(this.filter.search,"&filter[labels]=").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.targets=t.data.items,e.periodicallyRefreshReleaseTargets(5)})).catch((function(t){e.periodicallyRefreshReleaseTargets(30)}))},periodicallyRefreshReleaseTargets:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadReleaseTargets,s))}},watch:{filter:{handler:function(e,t){this.loadReleaseTargets()},deep:!0}},computed:{releaseTargetOptions:function(){var e=[{value:"",text:"All release targets"}];return this.targets&&this.targets.forEach((function(t){e.push({value:t.name,text:"".concat(t.name," (").concat(t.pipelinescount,")")})})),e}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},N=(0,y.Z)(k,O,[],!1,null,null,null);N.options.__file="src/components/ReleaseTargetFilter.vue";var R=N.exports,L=i(3897),E=i(2352),B=i(9090),I=i(9271);function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){Z(e,t,i[t])}))}return e}function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $={components:{Spinner:l.Z,PipelineRow:c.Z,StatusFilter:u.Z,UserFilter:x,LabelFilter:S.Z,FrequentLabels:C.Z,PipelineFilter:T.Z,ReleaseTargetFilter:R,SinceSelector:L.Z,PaginationCompact:E.Z,Pagination:B.Z,TransitionGroupHeader:I.Z},mixins:[o.Z],props:{query:{type:Object,default:null}},data:function(){return{pipelines:[],pagination:{page:1,size:12,totalPages:0,totalItems:0},filter:{status:"all",target:"",since:"1d",labels:"",search:"",recentCommitter:"false",recentReleaser:"false"},sort:"repo_source,repo_owner,repo_name",fields:[{name:"Pipeline",class:"col-3",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Version",class:"col-1"},{name:"Status",class:"col-1"},{name:"Built",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-last_updated_at"}},{name:"Branch",class:"col-1"},{name:"Revision",class:"col-1"},{name:"Commit(s)",class:"col-3"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=j({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadPipelines()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=j({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.filter&&this.filter.since&&""!==this.filter.since?e.since=this.filter.since:e.since&&delete e.since,this.filter&&this.filter.search&&""!==this.filter.search?e.search=this.filter.search:e.search&&delete e.search,this.filter&&this.filter.labels&&""!==this.filter.labels?e.labels=this.filter.labels:e.labels&&delete e.labels,this.filter&&this.filter.recentCommitter&&""!==this.filter.recentCommitter?e.recentCommitter=this.filter.recentCommitter:e.recentCommitter&&delete e.recentCommitter,this.filter&&this.filter.recentReleaser&&""!==this.filter.recentReleaser?e.recentReleaser=this.filter.recentReleaser:e.recentReleaser&&delete e.recentReleaser,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,this.sort?e.sort=this.sort:e.sort&&delete e.sort,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target,this.filter.since=e&&e.since?e.since:this.filterDefaults.since,this.filter.labels=e&&e.labels?e.labels:this.filterDefaults.labels,this.filter.search=e&&e.search?e.search:this.filterDefaults.search,this.filter.recentCommitter=e&&e.recentCommitter?e.recentCommitter:this.filterDefaults.recentCommitter,this.filter.recentReleaser=e&&e.recentReleaser?e.recentReleaser:this.filterDefaults.recentReleaser,this.sort=e&&e.sort?e.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadPipelines:function(){var e=this,t="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(t=this.filter.labels.split(",").join("&filter[labels]="));var i="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(i+="&filter[status]=pending&filter[status]=canceling");var s="&sort=".concat(this.sort),r="";this.user&&this.user.active&&this.filter&&"true"===this.filter.recentCommitter&&(r="&filter[recent-committer]=".concat(this.user.email),s="&sort=-last_updated_at,repo_source,repo_owner,repo_name");var a="";this.user&&this.user.active&&this.filter&&"true"===this.filter.recentReleaser&&(a="&filter[recent-releaser]=".concat(this.user.email),s="&sort=-last_updated_at,repo_source,repo_owner,repo_name"),this.axios.get("/api/pipelines?".concat(i).concat(r).concat(a,"&filter[since]=").concat(this.filter.since,"&filter[target]=").concat(this.filter.target,"&filter[search]=").concat(this.filter.search,"&filter[labels]=").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size).concat(s)).then((function(t){e.pipelines=t.data.items,e.pagination=t.data.pagination,e.loaded=!0,e.periodicallyRefreshPipelines(5)})).catch((function(t){e.periodicallyRefreshPipelines(30)}))},periodicallyRefreshPipelines:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipelines,s))},setTarget:function(e){this.filter.target=e,this.pagination.page=1,this.updateQueryParams()},setSince:function(e){this.filter.since=e,this.pagination.page=1,this.updateQueryParams()},setSearch:n()((function(e){this.filter.search=e,this.pagination.page=1,this.updateQueryParams()}),500)},computed:j({},(0,r.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadPipelines()}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},A=(0,y.Z)($,s,[],!1,null,null,null);A.options.__file="src/views/AllPipelines.vue";var F=A.exports},7670:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return B}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),i("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.build?i("build-header",{attrs:{build:e.build,pipeline:!e.pipeline||"pending"!==e.build.buildStatus&&"running"!==e.build.buildStatus?e.build:e.pipeline}}):e._e(),e._v(" "),e.build?i("pipeline-build-warnings",{attrs:{build:e.build}}):e._e(),e._v(" "),i("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.build?i("router-view",{staticClass:"m-3",attrs:{build:e.build}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(6578),n=i(7777),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-block"},[i("property-block",{attrs:{label:"Build",variant:"success",title:""}},[i("repository-title",{attrs:{repo:e.build}})],1),e._v(" "),i("property-block",{attrs:{label:"Version",value:e.build.buildVersion}}),e._v(" "),i("property-block",{attrs:{label:"Status",value:e.build.buildStatus}},[i("b-progress",[i("b-progress-bar",{attrs:{value:e.$options.filters.buildProgressBarValue(e.pipeline,e.build,e.now),label:e.$options.filters.buildProgressBarLabel(e.pipeline,e.build,e.now),variant:e.$options.filters.bootstrapVariant(e.build.buildStatus),animated:e.$options.filters.animatedProgressBar(e.build.buildStatus)}})],1)],1),e._v(" "),i("property-block",{attrs:{label:"Built at",value:e._f("formatDatetime")(e.build.insertedAt)}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.build.insertedAt))+"\n    "),i("duration-label",{attrs:{duration:e.build.duration,"pending-duration":e.build.pendingDuration}})],1),e._v(" "),i("property-block",{attrs:{label:"Branch",value:e.build.repoBranch}}),e._v(" "),i("property-block",{attrs:{label:"Revision"}},[i("commit-link",{attrs:{build:e.build}})],1),e._v(" "),i("property-block",{attrs:{label:"Commit(s)"}},[i("commits",{attrs:{commits:e.build.commits}})],1),e._v(" "),e.showTriggers?i("property-block",{attrs:{label:"Triggered by"}},[i("triggered-by",{attrs:{events:e.build.triggerEvents}})],1):e._e(),e._v(" "),e.showActions?i("property-block",{attrs:{label:"Actions","no-truncate":""}},[i("release-button",{attrs:{pipeline:e.pipeline,build:e.build}}),e._v(" "),i("rebuild-button",{attrs:{build:e.build,builds:e.builds}}),e._v(" "),i("cancel-button",{attrs:{build:e.build}})],1):e._e(),e._v(" "),e.showReleases?i("div",{staticClass:"block-divider"},[i("div")]):e._e(),e._v(" "),e.showReleases?i("property-block",{attrs:{label:"Releases",wide:""}},e._l(e.pipeline.releaseTargets,(function(t){return i("release-badge-for-build",{key:t.name,attrs:{"release-target":t,build:e.build}})})),1):e._e()],1)};o._withStripped=!0;var l=i(5752),c=i(2981),u=i(1006),p=i(2776),d=i(5654),f=i(8418),h=i(377),m=i(9325),g=i(5322),v=i(8714),b=i(6342),_=i(7322),y=i(3900);function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var x={components:{BProgress:l.D,BProgressBar:c.Q,CommitLink:u.Z,ReleaseButton:p.Z,RebuildButton:d.Z,CancelButton:f.Z,ReleaseBadgeForBuild:h.Z,TriggeredBy:m.Z,PropertyBlock:g.Z,RepositoryTitle:v.Z,DurationLabel:b.Z,Commits:_.Z},props:{build:{type:Object,default:null},builds:{type:Array,default:null},pipeline:{type:Object,default:null},rowItem:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus||y.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){w(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"}),{showReleases:function(){var e=this;return!!(this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0)&&this.pipeline.releaseTargets.some((function(t){return t.activeReleases&&t.activeReleases.some((function(t){return t.releaseVersion===e.build.buildVersion}))}))},showActions:function(){return this.user&&this.user.active&&this.build&&("failed"===this.build.buildStatus||"pending"===this.build.buildStatus||"running"===this.build.buildStatus||"canceled"===this.build.buildStatus||"canceling"===this.build.buildStatus||this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&"succeeded"===this.build.buildStatus)},showTriggers:function(){return this.build.triggerEvents&&this.build.triggerEvents.length>0}})},S=i(1900),C=(0,S.Z)(x,o,[],!1,null,null,null);C.options.__file="src/components/BuildHeader.vue";var T=C.exports,O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.warnings&&e.warnings.length>0?i("div",{staticClass:"col m-0 mt-3"},e._l(e.warnings,(function(e,t){return i("warning",{key:t,attrs:{warning:e}})})),1):e._e()};O._withStripped=!0;var D={components:{Warning:i(923).Z},props:{build:{type:Object,default:null}},data:function(){return{warnings:[],refresh:!0}},created:function(){this.loadBuildWarnings()},methods:{loadBuildWarnings:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds/").concat(this.build.id,"/warnings")).then((function(t){e.warnings=t.data.warnings})).catch((function(t){e.periodicallyRefresh(30)}))},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuildWarnings,s))}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},P=(0,S.Z)(D,O,[],!1,null,null,null);P.options.__file="src/components/PipelineBuildWarnings.vue";var k=P.exports,N=i(9708);function R(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var L={components:{BBreadcrumb:a.P,SectionHeader:n.Z,BuildHeader:T,PipelineBuildWarnings:k,InnerNavigationTabs:N.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},id:{type:String,default:null}},data:function(){return{build:null,pipeline:null,refresh:!0,breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"builds",to:{name:"PipelineBuilds",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"..."}]}},created:function(){this.loadBuild()},methods:{loadBuild:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds/").concat(this.id)).then((function(t){e.build=t.data,"pending"!==e.build.buildStatus&&"running"!==e.build.buildStatus||e.loadPipeline(),e.breadcrumbs[e.breadcrumbs.length-1]={text:"".concat(e.build.buildVersion),to:{name:"PipelineBuildLogs",params:{repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,id:e.id}},active:!0},"succeeded"!==e.build.buildStatus&&"failed"!==e.build.buildStatus?e.periodicallyRefreshBuild(5):e.periodicallyRefreshBuild(15)})).catch((function(t){console.warn(t),e.periodicallyRefreshBuild(30)}))},loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data})).catch((function(e){console.warn(e)}))},periodicallyRefreshBuild:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuild,s))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){R(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},E=(0,S.Z)(L,s,[],!1,null,null,null);E.options.__file="src/views/PipelineBuildDetails.vue";var B=E.exports},3394:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"col-12 text-center"},[i("log-navigation",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/alllogs",status:this.build.buildStatus,logid:e.logid}})],1),e._v(" "),e.logid?i("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/logsbyid/"+this.logid,status:this.build.buildStatus,"allow-tail":!1}}):"pending"===e.build.buildStatus||"running"===e.build.buildStatus||"canceling"===e.build.buildStatus?i("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/logs",status:this.build.buildStatus,"allow-tail":!0}}):e._e()],1)};s._withStripped=!0;var r=i(2901),a=i(9828),n={components:{LogNavigation:r.Z,LogViewer:a.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},id:{type:String,default:null},logid:{type:String,default:null},build:{type:Object,default:null}}},o=(0,i(1900).Z)(n,s,[],!1,null,null,null);o.options.__file="src/views/PipelineBuildLogs.vue";var l=o.exports},724:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-form-group",{staticClass:"m-3",attrs:{description:"Estafette uses a lot of sane defaults to keep your manifest small and readable."}},[i("b-form-checkbox",{model:{value:e.showDefaults,callback:function(t){e.showDefaults=t},expression:"showDefaults"}},[e._v("\n      Show defaults\n    ")])],1),e._v(" "),e.showDefaults?i("pre",{staticClass:"bg-light m-3 p-3"},[e._v(e._s(e.build.manifestWithDefaults))]):i("pre",{staticClass:"bg-light m-3 p-3"},[e._v(e._s(e.build.manifest))])],1)};s._withStripped=!0;var r=i(4951),a=i(4058),n={components:{BFormCheckbox:r.l,BFormGroup:a.x},props:{build:{type:Object,default:null}},data:function(){return{showDefaults:!1}}},o=(0,i(1900).Z)(n,s,[],!1,null,null,null);o.options.__file="src/views/PipelineBuildManifest.vue";var l=o.exports},7883:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-3"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-center"},[i("status-filter",{attrs:{filter:e.filter}}),e._v(" "),i("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),i("div",{staticClass:"row-header"},[i("div",{staticClass:"col-2"},[e._v("\n      Version\n    ")]),e._v(" "),i("div",{staticClass:"col-1"},[e._v("\n      Status\n    ")]),e._v(" "),i("div",{staticClass:"col-2"},[e._v("\n      Built at\n    ")]),e._v(" "),i("div",{staticClass:"col-1"},[e._v("\n      Branch\n    ")]),e._v(" "),i("div",{staticClass:"col-1"},[e._v("\n      Revision\n    ")]),e._v(" "),i("div",{staticClass:"col-3"},[e._v("\n      Commit(s)\n    ")]),e._v(" "),e.user&&e.user.active?i("div",{staticClass:"col-2"},[e._v("\n      Actions\n    ")]):e._e()]),e._v(" "),e.builds.length>0?i("transition-group",{attrs:{name:"list-complete",tag:"div"}},e._l(e.builds,(function(t){return i("build-row",{key:t.id,attrs:{build:t,builds:e.builds,pipeline:e.pipeline}})})),1):e.loaded?i("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no builds for the current filters. Please change your filters!\n  ")]):i("div",[i("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.builds.length>0?i("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(7817),n=i(1826),o=i(2352),l=i(3175),c=i(9090);function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){p(e,t,i[t])}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={components:{Spinner:a.Z,StatusFilter:n.Z,PaginationCompact:o.Z,BuildRow:l.Z,Pagination:c.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{builds:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all"},loaded:!1,refresh:!0}},created:function(){this.filterDefaults=u({},this.filter),this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBuilds()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=u({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBuilds:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds?").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.builds=t.data.items,e.pagination=t.data.pagination,e.loaded=!0})).catch((function(t){e.periodicallyRefreshBuilds(15)}))},periodicallyRefreshBuilds:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuilds,s))}},computed:u({},(0,r.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadBuilds()},pipeline:{handler:function(e,t){this.loadBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},f=(0,i(1900).Z)(d,s,[],!1,null,null,null);f.options.__file="src/views/PipelineBuilds.vue";var h=f.exports},9703:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),i("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.pipeline?i("pipeline-header",{attrs:{pipeline:e.pipeline}}):e._e(),e._v(" "),i("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.pipeline?i("router-view",{staticClass:"m-3",attrs:{pipeline:e.pipeline}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(6578),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-block"},[i("property-block",{attrs:{label:"Pipeline",variant:"success",title:""}},[i("repository-title",{attrs:{repo:e.pipeline}})],1),e._v(" "),e.showLabels?i("property-block",{attrs:{label:"Labels",wide:""}},[i("labels",{attrs:{labels:e.pipeline.labels}})],1):e._e(),e._v(" "),e.showReleases?i("property-block",{attrs:{label:"Releases",wide:""}},e._l(e.pipeline.releaseTargets,(function(t){return i("release-badge",{key:t.name,attrs:{"release-target":t,pipeline:e.pipeline}})})),1):e._e(),e._v(" "),e.pipeline.groups&&e.pipeline.groups.length>0?i("property-block",{attrs:{label:"Group(s)",wide:""}},e._l(e.pipeline.groups,(function(e){return i("group-badge",{key:e.id,attrs:{group:e}})})),1):e._e()],1)};n._withStripped=!0;var o=i(3385),l=i(5270),c=i(5322),u=i(8714),p=i(5212),d={components:{ReleaseBadge:o.Z,GroupBadge:l.Z,PropertyBlock:c.Z,RepositoryTitle:u.Z,Labels:p.Z},props:{pipeline:{type:Object,default:null},filter:{type:Object,default:null}},computed:{showReleases:function(){return this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0},showLabels:function(){return this.pipeline.labels&&this.pipeline.labels.length>0},showTriggers:function(){return this.pipeline.triggerEvents&&this.pipeline.triggerEvents.length>0}}},f=i(1900),h=(0,f.Z)(d,n,[],!1,null,null,null);h.options.__file="src/components/PipelineHeader.vue";var m=h.exports,g=i(7777),v=i(9708);function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _={components:{BBreadcrumb:a.P,SectionHeader:g.Z,PipelineHeader:m,InnerNavigationTabs:v.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null}},data:function(){return{pipeline:null,refresh:!0,breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}},active:!0}]}},created:function(){this.loadPipeline()},methods:{loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data,e.periodicallyRefreshPipeline(5)})).catch((function(t){e.periodicallyRefreshPipeline(30)}))},periodicallyRefreshPipeline:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipeline,s))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){b(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},y=(0,f.Z)(_,s,[],!1,null,null,null);y.options.__file="src/views/PipelineDetails.vue";var w=y.exports},1756:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return R}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{},[e.pipeline?i("pipeline-warnings",{attrs:{pipeline:e.pipeline}}):e._e(),e._v(" "),i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[i("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[i("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"tools"}}),e._v("\n      Recent builds\n    ")],1)]),e._v(" "),e.builds.length>0?i("transition-group",{staticClass:"row justify-content-center m-0 mt-3 mb-3 ml-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.builds,(function(t){return i("drag",{key:t.id,staticClass:"col-12 col-md-6 col-xl-4 col-xxl-3 col-xxxl-2 m-0 p-0 pr-3 pb-3 list-complete-item",attrs:{disabled:!e.user||!e.user.active||"succeeded"!==t.buildStatus,data:t}},[i("div",{class:["bg-light","rounded border align-items-center pt-3 pr-2 pb-2 pl-2 text-center bg-white"]},[i("div",{staticClass:"row mb-2"},[i("div",{staticClass:"col-6 text-truncate"},[e._v("\n            "+e._s(t.repoBranch)+"\n          ")]),e._v(" "),i("div",{staticClass:"col-6"},[i("commit-link",{attrs:{build:t}})],1)]),e._v(" "),i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col"},[i("b-button",{staticClass:"mr-1 mb-1 text-truncate",attrs:{to:{name:"PipelineBuildLogs",params:{repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName,id:t.id}},exact:"",variant:e.$options.filters.bootstrapVariant(t.buildStatus),size:"sm",block:""}},[t.buildVersion?i("span",[e._v("\n                "+e._s(t.buildVersion)+"\n              ")]):i("span",[e._v("\n                -\n              ")])])],1),e._v(" "),e.showActions(t)?i("div",{staticClass:"col-auto"},[i("rebuild-button-compact",{staticClass:"mr-1 mb-1 ml-1",attrs:{build:t,builds:e.builds}}),e._v(" "),i("cancel-button-compact",{staticClass:"mr-1 mb-1 ml-1",attrs:{build:t}})],1):e._e()]),e._v(" "),i("div",{staticClass:"row mt-2"},[t.commits&&t.commits.length>0?i("div",{staticClass:"col-12 text-muted text-truncate"},[e._v("\n            "+e._s(t.commits[0].message)+"\n          ")]):e._e()])])])})),1):e.loaded?i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 alert alert-warning text-center p-5"},[e._v("\n    There are no recent builds for the current pipeline.\n  ")]):i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3"},[i("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0?i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[i("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[i("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"upload"}}),e._v("\n      Releases\n      "),i("div",{staticClass:"small text-muted mt-2"},[e._v("\n        (drag and drop a build on a release)\n      ")])],1)]):e._e(),e._v(" "),i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},e._l(e.pipeline.releaseTargets,(function(t){return i("div",{key:t.name,staticClass:"col-12 col-md-6 col-xl-4 col-xxl-3 col-xxxl-2 m-0 p-0 pr-3 pb-3"},[i("div",{class:["bg-light","rounded border align-items-center pt-3 pr-2 pb-2 pl-2 text-center bg-white"]},[i("h6",{staticClass:"text-truncate"},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v(" "),e._l(e.mergedActionsAndActiveReleases(t),(function(s,r){return i("drop",{key:r,on:{drop:function(i){return e.releaseBuildToTargetAction(i,t,s)}}},[s&&s.id?i("b-button",{staticClass:"mr-1 mb-1 text-truncate",attrs:{to:{name:"PipelineReleaseLogs",params:{repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName,releaseID:s.id}},exact:"",variant:e.$options.filters.bootstrapVariant(s.releaseStatus),size:"sm",block:""}},[s.action?i("span",[e._v("\n              "+e._s(s.action)+":\n            ")]):e._e(),e._v(e._s(e._f("defaultValue")(s.releaseVersion,"-"))+"\n\n            "),e.releaseIsUpToDate(s)?i("font-awesome-icon",{attrs:{icon:"fire"}}):e._e()],1):s?i("button",{class:["btn btn-sm btn-block mr-1 mb-1 text-truncate",e.$options.filters.bootstrapClass(s.releaseStatus,"btn")]},[s.action?i("span",[e._v("\n              "+e._s(s.action)+":\n            ")]):e._e(),e._v(e._s(e._f("defaultValue")(s.releaseVersion,"-"))+"\n          ")]):e._e()],1)}))],2)])})),0)],1)};s._withStripped=!0;var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.warnings&&e.warnings.length>0?i("div",{staticClass:"col m-0 mt-3"},[i("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[i("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[i("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"exclamation-triangle"}}),e._v("\n      Warnings\n    ")],1)]),e._v(" "),e._l(e.warnings,(function(e,t){return i("warning",{key:t,attrs:{warning:e}})}))],2):e._e()};r._withStripped=!0;var a=i(923),n=i(8947),o=i(1436),l=i(7810);n.vI.add(o.eHv);var c={components:{Warning:a.Z,FontAwesomeIcon:l.GN},props:{pipeline:{type:Object,default:null}},data:function(){return{warnings:[],refresh:!0}},created:function(){this.loadPipelineWarnings()},methods:{loadPipelineWarnings:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/warnings")).then((function(t){e.warnings=t.data.warnings})).catch((function(t){e.periodicallyRefresh(30)}))},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipelineWarnings,s))}},watch:{pipeline:{handler:function(e,t){this.loadPipelineWarnings()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},u=i(1900),p=(0,u.Z)(c,r,[],!1,null,null,null);p.options.__file="src/components/PipelineWarnings.vue";var d=p.exports,f=i(629),h=i(5193),m=i(7817),g=i(1006),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.allowedToRebuild()?i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm",title:"Rebuild this failed build"},on:{click:function(t){return t.stopPropagation(),e.rebuild(t)}}},[i("font-awesome-icon",{attrs:{icon:"redo"}})],1):e._e()};function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}v._withStripped=!0,n.vI.add(o.XSV);var _={components:{BButton:h.T,FontAwesomeIcon:l.GN},props:{build:{type:Object,default:null},builds:{type:Array,default:null},compact:{type:Boolean,default:!1}},data:function(){return{clicked:!1}},methods:{allowedToRebuild:function(){var e=this;return!(!this.user.active||!this.build||"failed"!==this.build.buildStatus&&"canceled"!==this.build.buildStatus)&&(!(this.builds&&this.builds.length>0)||!this.builds.some((function(t){return t.buildVersion===e.build.buildVersion&&"succeeded"===t.buildStatus})))},rebuild:function(e){var t=this;this.user.active&&this.axios.post("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds"),this.build).then((function(e){t.builds.unshift(e.data),t.builds.shift()})).catch((function(e){console.warn(e)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){b(e,t,i[t])}))}return e}({},(0,f.rn)("user",{user:"me"}))},y=(0,u.Z)(_,v,[],!1,null,null,null);y.options.__file="src/components/RebuildButtonCompact.vue";var w=y.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user.active&&(e.build&&("pending"===e.build.buildStatus||"running"===e.build.buildStatus||"canceling"===e.build.buildStatus)||e.release&&("pending"===e.release.releaseStatus||"running"===e.release.releaseStatus||"canceling"===e.release.releaseStatus))?i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm",title:"Cancel this build"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[i("font-awesome-icon",{attrs:{icon:"ban"}})],1):e._e()};function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}x._withStripped=!0,n.vI.add(o.gPx);var C={components:{BButton:h.T,FontAwesomeIcon:l.GN},props:{build:{type:Object,default:null},release:{type:Object,default:null},compact:{type:Boolean,default:!1}},data:function(){return{clicked:!1}},methods:{cancel:function(e){var t=this;this.user.active&&(!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus&&"canceling"!==this.build.buildStatus?!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus&&"canceling"!==this.release.releaseStatus||this.axios.delete("/api/pipelines/".concat(this.release.repoSource,"/").concat(this.release.repoOwner,"/").concat(this.release.repoName,"/releases/").concat(this.release.id)).then((function(e){t.release.releaseStatus="canceling"})).catch((function(e){console.warn(e)})):this.axios.delete("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds/").concat(this.build.id)).then((function(e){t.build.buildStatus="canceling"})).catch((function(e){console.warn(e)})))}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){S(e,t,i[t])}))}return e}({},(0,f.rn)("user",{user:"me"}))},T=(0,u.Z)(C,x,[],!1,null,null,null);T.options.__file="src/components/CancelButtonCompact.vue";var O=T.exports,D=i(6030);function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n.vI.add(o.Rpv,o.CgH,o.cf$);var k={components:{PipelineWarnings:d,BButton:h.T,Spinner:m.Z,CommitLink:g.Z,RebuildButtonCompact:w,CancelButtonCompact:O,Drag:D.nc,Drop:D.Ud,FontAwesomeIcon:l.GN},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},pipeline:{type:Object,default:null}},data:function(){return{builds:[],loaded:!1,refresh:!0}},created:function(){this.loadRecentBuilds()},methods:{releaseBuildToTargetAction:function(e,t,i){if(!this.releaseTargetDisabled(t)){var s="";i.action&&(s=i.action);var r=e.data;this.startRelease(r,t,s)}},startRelease:function(e,t,i){var s=this;if(this.user.active){var r={name:t.name,action:i,repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,releaseVersion:e.buildVersion,releaseStatus:"pending"};this.updateRelease(r),this.axios.post("/api/pipelines/".concat(e.repoSource,"/").concat(e.repoOwner,"/").concat(e.repoName,"/releases"),r).then((function(e){r=e.data,s.updateRelease(r)})).catch((function(e){console.warn(e)}))}},updateRelease:function(e){var t=this.pipeline.releaseTargets.find((function(t){return t.name===e.name}));if(t)if(t.activeReleases){var i=!1,s=t.activeReleases.map((function(t){return t.action?e.action&&t.action===e.action?(i=!0,e):t:(i=!0,e)}));i||s.push(e),t.activeReleases=s}else t.activeReleases=[e]},releaseIsUpToDate:function(e){return this.pipeline&&this.pipeline.buildStatus&&"succeeded"===this.pipeline.buildStatus&&this.pipeline.buildVersion&&e&&e.releaseStatus&&"succeeded"===e.releaseStatus&&this.pipeline.buildVersion===e.releaseVersion},loadRecentBuilds:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds?page[size]=6")).then((function(t){e.builds=t.data.items,e.loaded=!0})).catch((function(t){e.periodicallyRefreshRecentBuilds(15)}))},periodicallyRefreshRecentBuilds:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadRecentBuilds,s))},getActiveRelease:function(e,t){if(e)return e.find((function(e){return e.action===t}))},releaseTargetDisabled:function(e){return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&this.pipeline.releaseTargets.some((function(t){return t.name===e.name&&t.activeReleases&&t.activeReleases.some((function(e){return e&&"running"===e.releaseStatus}))}))},showActions:function(e){return this.user&&this.user.active&&e&&("failed"===e.buildStatus||"pending"===e.buildStatus||"running"===e.buildStatus||"canceled"===e.buildStatus||"canceling"===e.buildStatus)}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){P(e,t,i[t])}))}return e}({},(0,f.rn)("user",{user:"me"}),{mergedActionsAndActiveReleases:function(){var e=this;return function(t){if(!(t.actions&&0!==t.actions.length||t.activeReleases&&0!==t.activeReleases.length))return[{name:t.name,repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName}];if(!t.actions||0===t.actions.length)return t.activeReleases;var i=[];return t.actions.forEach((function(s){var r=e.getActiveRelease(t.activeReleases,s.name);void 0!==r?i.push(r):i.push({name:t.name,action:s.name,repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName})})),i}}}),watch:{$route:function(e,t){this.loadRecentBuilds()},pipeline:{handler:function(e,t){this.loadRecentBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},N=(0,u.Z)(k,s,[],!1,null,null,null);N.options.__file="src/views/PipelineOverview.vue";var R=N.exports},6281:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return T}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),i("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.release?i("release-header",{attrs:{release:e.release,pipeline:!e.pipeline||"pending"!==e.release.releaseStatus&&"running"!==e.release.releaseStatus?e.release:e.pipeline}}):e._e(),e._v(" "),i("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.release?i("router-view",{staticClass:"m-3",attrs:{release:e.release}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(6578),n=i(7777),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-block"},[i("property-block",{attrs:{label:"Release",variant:"success",title:""}},[i("repository-title",{attrs:{repo:e.release}})],1),e._v(" "),i("property-block",{attrs:{label:e.release.action?"Target + action":"Target",value:e.release.action?e.release.name+" / "+e.release.action:e.release.name}},[e._v("\n    "+e._s(e.release.name)),e.release.action?i("span",[e._v("\n      / "+e._s(e.release.action)+"\n    ")]):e._e()]),e._v(" "),i("property-block",{attrs:{label:"Version",value:e.release.releaseVersion}}),e._v(" "),i("property-block",{attrs:{label:"Status"}},[i("b-progress",[i("b-progress-bar",{attrs:{value:e.$options.filters.releaseProgressBarValue(e.pipeline,e.release,e.now),label:e.$options.filters.releaseProgressBarLabel(e.pipeline,e.release,e.now),variant:e.$options.filters.bootstrapVariant(e.release.releaseStatus),animated:e.$options.filters.animatedProgressBar(e.release.releaseStatus)}})],1)],1),e._v(" "),i("property-block",{attrs:{label:"Released at"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.release.insertedAt))+"\n    "),i("duration-label",{attrs:{duration:e.release.duration,"pending-duration":e.release.pendingDuration}})],1),e._v(" "),i("property-block",{attrs:{label:"Triggered by"}},[i("triggered-by",{attrs:{events:e.release.triggerEvents}})],1),e._v(" "),e.showActions?i("property-block",{attrs:{label:"Actions"}},[i("cancel-button",{attrs:{release:e.release}})],1):e._e()],1)};o._withStripped=!0;var l=i(5752),c=i(2981),u=i(8418),p=i(9325),d=i(5322),f=i(8714),h=i(6342),m=i(3900);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v={components:{BProgress:l.D,BProgressBar:c.Q,CancelButton:u.Z,TriggeredBy:p.Z,PropertyBlock:d.Z,RepositoryTitle:f.Z,DurationLabel:h.Z},props:{release:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus||m.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){g(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"}),{showActions:function(){return this.user&&this.user.active&&this.release&&("pending"===this.release.releaseStatus||"running"===this.release.releaseStatus||"canceling"===this.release.releaseStatus)}})},b=i(1900),_=(0,b.Z)(v,o,[],!1,null,null,null);_.options.__file="src/components/ReleaseHeader.vue";var y=_.exports,w=i(9708);function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S={components:{BBreadcrumb:a.P,SectionHeader:n.Z,ReleaseHeader:y,InnerNavigationTabs:w.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},releaseID:{type:String,default:null}},data:function(){return{release:null,pipeline:null,refresh:!0,breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"releases",to:{name:"PipelineReleases",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"..."}]}},created:function(){this.loadRelease()},methods:{loadRelease:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/releases/").concat(this.releaseID)).then((function(t){e.release=t.data,"pending"!==e.release.releaseStatus&&"running"!==e.release.releaseStatus||e.loadPipeline(),e.breadcrumbs[e.breadcrumbs.length-1]={text:"".concat(e.release.releaseVersion," to ").concat(e.release.name)+(e.release.action?" (".concat(e.release.action,")"):""),to:{name:"PipelineReleaseLogs",params:{repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,releaseID:e.releaseID}},active:!0},"succeeded"!==e.release.releaseStatus&&"failed"!==e.release.releaseStatus?e.periodicallyRefreshRelease(5):e.periodicallyRefreshRelease(15)})).catch((function(t){e.periodicallyRefreshRelease(30)}))},loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data})).catch((function(e){console.warn(e)}))},periodicallyRefreshRelease:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadRelease,s))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){x(e,t,i[t])}))}return e}({},(0,r.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},C=(0,b.Z)(S,s,[],!1,null,null,null);C.options.__file="src/views/PipelineReleaseDetails.vue";var T=C.exports},6684:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"col-12 text-center"},[i("log-navigation",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/alllogs",status:this.release.releaseStatus,logid:e.logid}})],1),e._v(" "),e.logid?i("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/logsbyid/"+this.logid,status:this.release.releaseStatus,"allow-tail":!1}}):"pending"===e.release.releaseStatus||"running"===e.release.releaseStatus||"canceling"===e.release.releaseStatus?i("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/logs",status:this.release.releaseStatus,"allow-tail":!0}}):e._e()],1)};s._withStripped=!0;var r=i(2901),a=i(9828),n={components:{LogNavigation:r.Z,LogViewer:a.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},releaseID:{type:String,default:null},logid:{type:String,default:null},release:{type:Object,default:null}}},o=(0,i(1900).Z)(n,s,[],!1,null,null,null);o.options.__file="src/views/PipelineReleaseLogs.vue";var l=o.exports},5529:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return T}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-3"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-3"},[i("release-target-selector",{attrs:{model:e.filter.target,"on-change":e.setTarget,pipeline:e.pipeline}})],1),e._v(" "),i("div",{staticClass:"col-7 col-lg-6 text-lg-center"},[i("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),i("div",{staticClass:"col-5 col-lg-3"},[i("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),i("div",{staticClass:"row-header"},[i("div",{staticClass:"col-2"},[e._v("\n      Target\n    ")]),e._v(" "),i("div",{staticClass:"col-2"},[e._v("\n      Version\n    ")]),e._v(" "),i("div",{staticClass:"col-2"},[e._v("\n      Status\n    ")]),e._v(" "),i("div",{staticClass:"col-2"},[e._v("\n      Released\n    ")]),e._v(" "),i("div",{staticClass:"col-2"},[e._v("\n      Triggered by\n    ")]),e._v(" "),e.user&&e.user.active?i("div",{staticClass:"col-2"},[e._v("\n      Actions\n    ")]):e._e()]),e._v(" "),e.releases.length>0?i("transition-group",{attrs:{name:"list-complete",tag:"div"}},e._l(e.releases,(function(t){return i("release-row",{key:t.id,attrs:{release:t,pipeline:e.pipeline}})})),1):e.loaded?i("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no releases for the current filters. Please change your filters!\n  ")]):i("div",[i("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.releases.length>0?i("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};s._withStripped=!0;var r=i(629),a=i(7817),n=i(9090),o=i(1826),l=i(9818),c=i(2352),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-input-group",{staticClass:"mb-3"},[i("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[i("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),i("b-form-select",{attrs:{options:e.releaseTargetOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};u._withStripped=!0;var p=i(6982),d=i(6127),f=i(7754),h=i(8947),m=i(1436),g=i(7810);h.vI.add(m.cf$);var v={components:{BFormSelect:p.K,BInputGroup:d.w,BInputGroupPrepend:f.P,FontAwesomeIcon:g.GN},props:{model:{type:String,default:null},onChange:{type:Function,default:null},pipeline:{type:Object,default:null}},data:function(){return{mutableModel:this.model}},computed:{releaseTargetOptions:function(){var e=[{value:"all",text:"All release targets"}];return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.forEach((function(t){e.push({value:t.name,text:t.name})})),e}}},b=i(1900),_=(0,b.Z)(v,u,[],!1,null,null,null);_.options.__file="src/components/ReleaseTargetSelector.vue";var y=_.exports;function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){x(e,t,i[t])}))}return e}function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S={components:{Spinner:a.Z,Pagination:n.Z,StatusFilter:o.Z,ReleaseRow:l.Z,PaginationCompact:c.Z,ReleaseTargetSelector:y},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{releases:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",target:"all"},loaded:!1,refresh:!0}},created:function(){this.filterDefaults=w({},this.filter),this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadReleases()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=w({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadReleases:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling");var i="filter[target]=".concat(this.filter.target);this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/releases?").concat(t,"&").concat(i,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.releases=t.data.items,e.pagination=t.data.pagination,e.loaded=!0})).catch((function(t){e.periodicallyRefreshRelease(15)}))},periodicallyRefreshRelease:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadReleases,s))},setTarget:function(e){this.filter.target=e,this.updateQueryParams()}},computed:w({},(0,r.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadReleases()},pipeline:{handler:function(e,t){this.loadReleases()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},C=(0,b.Z)(S,s,[],!1,null,"36b13f48",null);C.options.__file="src/views/PipelineReleases.vue";var T=C.exports},7707:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return P}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-3"},[i("div",{staticClass:"row mt-0 mr-0 ml-0"},[i("div",{staticClass:"col-12 col-sm-8 col-lg"}),e._v(" "),i("div",{staticClass:"col-12 col-sm-4 col-lg-2 p-0 text-right"},[i("b-input-group",{staticClass:"mb-3"},[i("b-input-group-prepend",{attrs:{"is-text":""}},[i("font-awesome-icon",{attrs:{icon:"history"}})],1),e._v(" "),i("b-form-select",{attrs:{options:e.lastOptions},on:{change:e.setLast},model:{value:e.filter.last,callback:function(t){e.$set(e.filter,"last",t)},expression:"filter.last"}})],1)],1)]),e._v(" "),i("div",{staticClass:"mt-0 mr-3 mb-3 ml-3 row"},[i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-timeline",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0?i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-timeline",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e(),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-cpu",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0?i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-cpu",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e(),e._v(" "),i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-memory",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0?i("div",{staticClass:"col-12 col-lg-6 col-xxl-4 col-xxxl-3"},[i("pipeline-stats-memory",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e()])])};s._withStripped=!0;var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-0 graph bg-white"},[i("div",{staticClass:"rounded border"},[0==e.series.length?i("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),i("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};r._withStripped=!0;var a=i(7817),n=i(1700),o=i.n(n),l={components:{Spinner:a.Z,apexcharts:function(){return i.e(909).then(i.t.bind(i,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-duration-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" duration",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"duration"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatDuration(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatDuration(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],i=this.getColor(this.status),s=[i];for(var r in t){var a=t[r];a!==i&&s.push(a)}return s},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"durations?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.durations),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,s))},updateSeries:function(e){var t=this,i={};e.forEach((function(e){var t="duration";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),i[t]||(i[t]=[]),i[t].push({x:e.insertedAt,y:e.duration})}));var s=function(e){var s=t.series.find((function(t){return t.name===e}));s||(s={name:e,data:[]},t.series.push(s)),s.data=t.filterOutliers(i[e])};for(var r in i)s(r)},filterOutliers:function(e){if(e.length<10)return e.sort((function(e,t){return new Date(e.x)-new Date(t.x)}));var t,i,s=e.slice().sort((function(e,t){return e.y-t.y}));s.length/4%1==0?(t=.5*(s[s.length/4].y+s[s.length/4+1].y),i=.5*(s[s.length*(3/4)].y+s[s.length*(3/4)+1].y)):(t=s[Math.floor(s.length/4+1)].y,i=s[Math.ceil(s.length*(3/4)+1)].y);var r=i-t,a=i+1.5*r,n=t-1.5*r;return(n>=a?s.filter((function(e){return e.y>=a&&e.y<=n})):s.filter((function(e){return e.y>=n&&e.y<=a}))).sort((function(e,t){return new Date(e.x)-new Date(t.x)}))}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},c=i(1900),u=(0,c.Z)(l,r,[],!1,null,null,null);u.options.__file="src/components/PipelineStatsTimeline.vue";var p=u.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-0 graph bg-white"},[i("div",{staticClass:"rounded border"},[0==e.series.length?i("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),i("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};d._withStripped=!0;var f={components:{Spinner:a.Z,apexcharts:function(){return i.e(909).then(i.t.bind(i,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-cpu-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" max CPU",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"cpu cores"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatNumber(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatNumber(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],i=this.getColor(this.status),s=[i];for(var r in t){var a=t[r];a!==i&&s.push(a)}return s},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"cpu?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.measurements),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,s))},updateSeries:function(e){var t=this,i={};e.forEach((function(e){var t="cpu";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),i[t]||(i[t]=[]),i[t].push({x:e.insertedAt,y:e.cpuMaxUsage})}));var s=function(e){var s=t.series.find((function(t){return t.name===e}));s||(s={name:e,data:[]},t.series.push(s)),s.data=i[e]};for(var r in i)s(r)}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},h=(0,c.Z)(f,d,[],!1,null,null,null);h.options.__file="src/components/PipelineStatsCpu.vue";var m=h.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-0 graph bg-white"},[i("div",{staticClass:"rounded border"},[0==e.series.length?i("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),i("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};g._withStripped=!0;var v={components:{Spinner:a.Z,apexcharts:function(){return i.e(909).then(i.t.bind(i,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-memory-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" max memory",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"duration"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatBytes(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatBytes(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],i=this.getColor(this.status),s=[i];for(var r in t){var a=t[r];a!==i&&s.push(a)}return s},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"memory?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.measurements),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,i=1e3*e*1.25,s=Math.floor(Math.random()*(t-i+1)+i);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,s))},updateSeries:function(e){var t=this,i={};e.forEach((function(e){var t="memory";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),i[t]||(i[t]=[]),i[t].push({x:e.insertedAt,y:e.memoryMaxUsage})}));var s=function(e){var s=t.series.find((function(t){return t.name===e}));s||(s={name:e,data:[]},t.series.push(s)),s.data=i[e]};for(var r in i)s(r)}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},b=(0,c.Z)(v,g,[],!1,null,null,null);b.options.__file="src/components/PipelineStatsMemory.vue";var _=b.exports,y=i(6982),w=i(6127),x=i(7754),S=i(8947),C=i(1436),T=i(7810);S.vI.add(C.Stf,C.qO$);var O={components:{PipelineStatsTimeline:p,PipelineStatsCpu:m,PipelineStatsMemory:_,BFormSelect:y.K,BInputGroup:w.w,BInputGroupPrepend:x.P,FontAwesomeIcon:T.GN},props:{query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{filter:{last:"100"},lastOptions:[{value:"25",text:"Last 25 builds/releases"},{value:"100",text:"Last 100 builds/releases"},{value:"250",text:"Last 250 builds/releases"},{value:"1000",text:"Last 1000 builds/releases"},{value:"25000",text:"All builds/releases"}]}},created:function(){this.setDataFromQueryParams(this.query)},methods:{setDataFromQueryParams:function(e){this.filter.last=e&&e.last?e.last:"100"},updateQueryParams:function(){this.$router.push({query:{last:this.filter.last}})},setLast:function(e){this.filter.last=e,this.updateQueryParams()}}},D=(0,c.Z)(O,s,[],!1,null,null,null);D.options.__file="src/views/PipelineStatistics.vue";var P=D.exports},3840:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-3"},[i("div",{staticClass:"container-fluid text-center p-5"},[i("div",{staticClass:"row d-flex justify-content-center"},[i("div",{class:["rounded border border-warning m-3 p-4 d-inline-flex align-items-center trigger-block bg-white"]},[i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),i("a",{staticClass:"text-body",attrs:{href:"https://"+e.pipeline.repoSource+"/"+e.pipeline.repoOwner+"/"+e.pipeline.repoName,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n              "+e._s(e.pipeline.repoSource)+"/"+e._s(e.pipeline.repoOwner)+"/"+e._s(e.pipeline.repoName)+" *\n            ")])],1),e._v(" "),e._m(0),e._v(" "),e._m(1)])]),e._v(" "),e._l(e.pipeline.triggers,(function(t,s){return i("div",{key:s,class:["rounded border border-warning m-3 p-4 d-inline-flex align-items-center trigger-block bg-white"]},[t.pipeline?i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"tools"}}),e._v("\n            "+e._s(t.pipeline.name)+"\n          ")],1),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            branch\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.branch)+"\n            ")])]),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.event)+"\n            ")])]),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            status\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.status)+"\n            ")])])]):e._e(),e._v(" "),t.release?i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"upload"}}),e._v("\n            "+e._s(t.release.name)+"\n          ")],1),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            target\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.target)+"\n            ")])]),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.event)+"\n            ")])]),e._v(" "),i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            status\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.status)+"\n            ")])])]):e._e(),e._v(" "),t.git?i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),i("a",{staticClass:"text-body",attrs:{href:"https://"+t.git.repository,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n              "+e._s(t.git.repository)+"\n            ")])],1)]):e._e(),e._v(" "),t.pubsub?i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"bezier-curve"}}),e._v("\n            projects/"+e._s(t.pubsub.project)+"/topics/"+e._s(t.pubsub.topic)+"\n          ")],1)]):e._e(),e._v(" "),t.docker?i("div"):e._e(),e._v(" "),t.cron?i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"clock"}}),e._v("\n            "+e._s(t.cron.schedule)+"\n          ")],1)]):e._e()])}))],2),e._v(" "),i("div",{staticClass:"row d-flex justify-content-center"},[i("div",{class:["rounded border border-primary m-3 p-5 d-inline-flex align-items-center pipeline-block bg-white"]},[i("div",[i("h6",[i("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"industry"}}),e._v("\n            "+e._s(e.pipeline.repoSource)+"/"+e._s(e.pipeline.repoOwner)+"/"+e._s(e.pipeline.repoName)+"\n          ")],1)])])]),e._v(" "),e._m(2)])])};s._withStripped=!0;var r=i(8947),a=i(1436),n=i(7810);r.vI.add(a.o4t,a.CgH,a.cf$,a.m08,a.SZw,a.mh3,a.jPh,a.izv);var o={components:{FontAwesomeIcon:n.GN},props:{pipeline:{type:Object,default:null}}},l=(0,i(1900).Z)(o,s,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              push\n            ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            branch\n            "),i("span",{staticClass:"badge badge-warning"},[e._v("\n              any\n            ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alert alert-light text-center m-5 p-4"},[i("div",[e._v("\n        * pipelines automatically trigger on git push; if you want to trigger on other events have a look at the "),i("a",{attrs:{href:"https://estafette.io/usage/manifest/#triggers",target:"_blank"}},[e._v("\n          documentation\n        ")]),e._v(" on how to start using triggers.\n      ")])])}],!1,null,"7b860f92",null);l.options.__file="src/views/PipelineTriggers.vue";var c=l.exports},8152:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section-header"),e._v(" "),i("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),i("router-view")],1)};s._withStripped=!0;var r=i(7777),a=i(9708),n={components:{SectionHeader:r.Z,InnerNavigationTabs:a.Z}},o=(0,i(1900).Z)(n,s,[],!1,null,null,null);o.options.__file="src/views/Pipelines.vue";var l=o.exports},3521:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-form",{staticClass:"rounded border bg-white p-3",attrs:{autocomplete:"off"},on:{submit:e.onSubmit}},[i("b-form-group",{attrs:{description:"Required for use as a Kubernetes secret."}},[i("b-form-checkbox",{attrs:{id:"base64"},model:{value:e.form.base64,callback:function(t){e.$set(e.form,"base64",t)},expression:"form.base64"}},[e._v("\n        Base64 encode\n      ")])],1),e._v(" "),e.showDoubleEncrypt?i("b-form-group",{attrs:{description:"To encrypt the secret envelope a second time for injecting it into Estafette's configmap."}},[i("b-form-checkbox",{attrs:{id:"double"},model:{value:e.form.double,callback:function(t){e.$set(e.form,"double",t)},expression:"form.double"}},[e._v("\n        Double encrypt\n      ")])],1):e._e(),e._v(" "),i("b-form-group",{attrs:{label:"Pipeline restriction regex","label-for":"pipelineAllowList",description:"The pipeline to restrict decryption of the secret for."}},[i("b-form-input",{attrs:{id:"pipelineAllowList",readonly:e.pipelineAllowListReadonly,type:"text"},model:{value:e.form.pipelineAllowList,callback:function(t){e.$set(e.form,"pipelineAllowList",t)},expression:"form.pipelineAllowList"}})],1),e._v(" "),i("b-form-group",{attrs:{label:"Value to encrypt","label-for":"value",description:"The encrypted secret works only for this Estafette CI installation. Try to avoid newlines, this can cause errors during pipeline execution."}},[i("b-form-textarea",{staticClass:"border bg-light",attrs:{id:"value",placeholder:"Paste your value to be encrypted",rows:5},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),e._v(" "),i("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"}},[e._v("\n      Encrypt\n    ")])],1),e._v(" "),e.encrypting?i("div",[i("spinner",{attrs:{color:"secondary"}})],1):e._e(),e._v(" "),e.secret?i("div",{staticClass:"mt-4"},[i("h5",[e._v("Use this in your manifest to hide secrets in plain sight!")]),e._v(" "),i("div",{staticClass:"pre-wrapper"},[i("pre",{staticClass:"bg-light p-3"},[i("code",[e._v(e._s(e.secret))])]),e._v(" "),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.click",modifiers:{click:!0}}],staticClass:"btn-clipboard",attrs:{title:"Copied!"},on:{click:e.copy}},[e._v("\n        Copy\n      ")])],1)]):e._e()],1)};s._withStripped=!0;var r=i(7817),a=i(4909),n=i(4951),o=i(2183),l=i(5302),c=i(4058),u=i(5193),p=i(8365),d={components:{spinner:r.Z,BForm:a.e,BFormCheckbox:n.l,BFormInput:o.e,BFormTextarea:l.y,BFormGroup:c.x,BButton:u.T},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null}},directives:{BTooltip:p.T},data:function(){return{form:{base64:!1,double:!1,pipelineAllowList:null!==this.repoSource&&null!==this.repoOwner&&null!==this.repoName?"".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName):".*",value:null},pipelineAllowListReadonly:"AdminSecretEncrypter"!==this.$route.name,showDoubleEncrypt:"AdminSecretEncrypter"===this.$route.name,encrypting:!1,secret:null}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.encrypting=!0,this.axios.post("/api/manifest/encrypt",this.form).then((function(e){t.encrypting=!1,t.secret=e.data.secret,window.scrollTo(0,document.body.scrollHeight)})).catch((function(e){t.encrypting=!1,console.warn(e)}))},copy:function(){var e=document.createElement("textarea");e.value=this.secret,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},f=(0,i(1900).Z)(d,s,[],!1,null,"3db098b8",null);f.options.__file="src/views/SecretEncrypter.vue";var h=f.exports}}]);